import{e as pe,r as ge,m as $,g as me,i as Ae,w as Me,a as Le,b as V,c as _e,t as Fe,o as De,n as Te,d as ze,f as ye,h as se,j as L,k as $e,l as S,p as Ve,N as Re,q as z,s as d,u as y,_ as Ne,v as He,x as m,y as ae,z as B,A as Je,B as Ze,C as Qe,D as Ge,E as We,F as Xe,G as Ye,H as et,I as tt,J as ot}from"./vendor.eed8b533.js";const nt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};nt();var rt=!1;/*!
  * pinia v2.0.14
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let he;const N=e=>he=e,ve=Symbol();function Y(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var F;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(F||(F={}));function st(){const e=pe(!0),t=e.run(()=>ge({}));let r=[],o=[];const n=$({install(s){N(n),n._a=s,s.provide(ve,n),s.config.globalProperties.$pinia=n,o.forEach(a=>r.push(a)),o=[]},use(s){return!this._a&&!rt?o.push(s):r.push(s),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return n}const be=()=>{};function ie(e,t,r,o=be){e.push(t);const n=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),o())};return!r&&me()&&De(n),n}function K(e,...t){e.slice().forEach(r=>{r(...t)})}function ee(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const o=t[r],n=e[r];Y(n)&&Y(o)&&e.hasOwnProperty(r)&&!V(o)&&!_e(o)?e[r]=ee(n,o):e[r]=o}return e}const at=Symbol();function it(e){return!Y(e)||!e.hasOwnProperty(at)}const{assign:q}=Object;function lt(e){return!!(V(e)&&e.effect)}function ct(e,t,r,o){const{state:n,actions:s,getters:a}=t,i=r.state.value[e];let u;function l(){i||(r.state.value[e]=n?n():{});const p=ze(r.state.value[e]);return q(p,s,Object.keys(a||{}).reduce((c,g)=>(c[g]=$(ye(()=>{N(r);const v=r._s.get(e);return a[g].call(v,v)})),c),{}))}return u=ke(e,l,t,r,o,!0),u.$reset=function(){const c=n?n():{};this.$patch(g=>{q(g,c)})},u}function ke(e,t,r={},o,n,s){let a;const i=q({actions:{}},r),u={deep:!0};let l,p,c=$([]),g=$([]),v;const _=o.state.value[e];!s&&!_&&(o.state.value[e]={}),ge({});let f;function re(k){let b;l=p=!1,typeof k=="function"?(k(o.state.value[e]),b={type:F.patchFunction,storeId:e,events:v}):(ee(o.state.value[e],k),b={type:F.patchObject,payload:k,storeId:e,events:v});const P=f=Symbol();Te().then(()=>{f===P&&(l=!0)}),p=!0,K(c,b,o.state.value[e])}const xe=be;function Pe(){a.stop(),c=[],g=[],o._s.delete(e)}function Oe(k,b){return function(){N(o);const P=Array.from(arguments),I=[],A=[];function Ue(C){I.push(C)}function Ie(C){A.push(C)}K(g,{args:P,name:k,store:j,after:Ue,onError:Ie});let M;try{M=b.apply(this&&this.$id===e?this:j,P)}catch(C){throw K(A,C),C}return M instanceof Promise?M.then(C=>(K(I,C),C)).catch(C=>(K(A,C),Promise.reject(C))):(K(I,M),M)}}const Ke={_p:o,$id:e,$onAction:ie.bind(null,g),$patch:re,$reset:xe,$subscribe(k,b={}){const P=ie(c,k,b.detached,()=>I()),I=a.run(()=>Me(()=>o.state.value[e],A=>{(b.flush==="sync"?p:l)&&k({storeId:e,type:F.direct,events:v},A)},q({},u,b)));return P},$dispose:Pe},j=Le(q({},Ke));o._s.set(e,j);const U=o._e.run(()=>(a=pe(),a.run(()=>t())));for(const k in U){const b=U[k];if(V(b)&&!lt(b)||_e(b))s||(_&&it(b)&&(V(b)?b.value=_[k]:ee(b,_[k])),o.state.value[e][k]=b);else if(typeof b=="function"){const P=Oe(k,b);U[k]=P,i.actions[k]=b}}return q(j,U),q(Fe(j),U),Object.defineProperty(j,"$state",{get:()=>o.state.value[e],set:k=>{re(b=>{q(b,k)})}}),o._p.forEach(k=>{q(j,a.run(()=>k({store:j,app:o._a,pinia:o,options:i})))}),_&&s&&r.hydrate&&r.hydrate(j.$state,_),l=!0,p=!0,j}function ut(e,t,r){let o,n;const s=typeof t=="function";typeof e=="string"?(o=e,n=s?r:t):(n=e,o=e.id);function a(i,u){const l=me();return i=i||l&&Ae(ve),i&&N(i),i=he,i._s.has(o)||(s?ke(o,t,n,i):ct(o,n,i)),i._s.get(o)}return a.$id=o,a}var Z=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Q(e,t,r,o){e.addEventListener?e.addEventListener(t,r,o):e.attachEvent&&e.attachEvent("on".concat(t),function(){r(window.event)})}function we(e,t){for(var r=t.slice(0,t.length-1),o=0;o<r.length;o++)r[o]=e[r[o].toLowerCase()];return r}function Se(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");for(var t=e.split(","),r=t.lastIndexOf("");r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}function ft(e,t){for(var r=e.length>=t.length?e:t,o=e.length>=t.length?t:e,n=!0,s=0;s<r.length;s++)o.indexOf(r[s])===-1&&(n=!1);return n}var ne={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Z?173:189,"=":Z?61:187,";":Z?59:186,"'":222,"[":219,"]":221,"\\":220},O={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},te={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},E={16:!1,18:!1,17:!1,91:!1},w={};for(var T=1;T<20;T++)ne["f".concat(T)]=111+T;var h=[],le=!1,Ee="all",Be=[],H=function(t){return ne[t.toLowerCase()]||O[t.toLowerCase()]||t.toUpperCase().charCodeAt(0)};function Ce(e){Ee=e||"all"}function D(){return Ee||"all"}function dt(){return h.slice(0)}function pt(e){var t=e.target||e.srcElement,r=t.tagName,o=!0;return(t.isContentEditable||(r==="INPUT"||r==="TEXTAREA"||r==="SELECT")&&!t.readOnly)&&(o=!1),o}function gt(e){return typeof e=="string"&&(e=H(e)),h.indexOf(e)!==-1}function mt(e,t){var r,o;e||(e=D());for(var n in w)if(Object.prototype.hasOwnProperty.call(w,n))for(r=w[n],o=0;o<r.length;)r[o].scope===e?r.splice(o,1):o++;D()===e&&Ce(t||"all")}function _t(e){var t=e.keyCode||e.which||e.charCode,r=h.indexOf(t);if(r>=0&&h.splice(r,1),e.key&&e.key.toLowerCase()==="meta"&&h.splice(0,h.length),(t===93||t===224)&&(t=91),t in E){E[t]=!1;for(var o in O)O[o]===t&&(x[o]=!1)}}function yt(e){if(!e)Object.keys(w).forEach(function(a){return delete w[a]});else if(Array.isArray(e))e.forEach(function(a){a.key&&G(a)});else if(typeof e=="object")e.key&&G(e);else if(typeof e=="string"){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var n=r[0],s=r[1];typeof n=="function"&&(s=n,n=""),G({key:e,scope:n,method:s,splitKey:"+"})}}var G=function(t){var r=t.key,o=t.scope,n=t.method,s=t.splitKey,a=s===void 0?"+":s,i=Se(r);i.forEach(function(u){var l=u.split(a),p=l.length,c=l[p-1],g=c==="*"?"*":H(c);if(!!w[g]){o||(o=D());var v=p>1?we(O,l):[];w[g]=w[g].filter(function(_){var f=n?_.method===n:!0;return!(f&&_.scope===o&&ft(_.mods,v))})}})};function ce(e,t,r,o){if(t.element===o){var n;if(t.scope===r||t.scope==="all"){n=t.mods.length>0;for(var s in E)Object.prototype.hasOwnProperty.call(E,s)&&(!E[s]&&t.mods.indexOf(+s)>-1||E[s]&&t.mods.indexOf(+s)===-1)&&(n=!1);(t.mods.length===0&&!E[16]&&!E[18]&&!E[17]&&!E[91]||n||t.shortcut==="*")&&t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function ue(e,t){var r=w["*"],o=e.keyCode||e.which||e.charCode;if(!!x.filter.call(this,e)){if((o===93||o===224)&&(o=91),h.indexOf(o)===-1&&o!==229&&h.push(o),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(_){var f=te[_];e[_]&&h.indexOf(f)===-1?h.push(f):!e[_]&&h.indexOf(f)>-1?h.splice(h.indexOf(f),1):_==="metaKey"&&e[_]&&h.length===3&&(e.ctrlKey||e.shiftKey||e.altKey||(h=h.slice(h.indexOf(f))))}),o in E){E[o]=!0;for(var n in O)O[n]===o&&(x[n]=!0);if(!r)return}for(var s in E)Object.prototype.hasOwnProperty.call(E,s)&&(E[s]=e[te[s]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(h.indexOf(17)===-1&&h.push(17),h.indexOf(18)===-1&&h.push(18),E[17]=!0,E[18]=!0);var a=D();if(r)for(var i=0;i<r.length;i++)r[i].scope===a&&(e.type==="keydown"&&r[i].keydown||e.type==="keyup"&&r[i].keyup)&&ce(e,r[i],a,t);if(o in w){for(var u=0;u<w[o].length;u++)if((e.type==="keydown"&&w[o][u].keydown||e.type==="keyup"&&w[o][u].keyup)&&w[o][u].key){for(var l=w[o][u],p=l.splitKey,c=l.key.split(p),g=[],v=0;v<c.length;v++)g.push(H(c[v]));g.sort().join("")===h.sort().join("")&&ce(e,l,a,t)}}}}function ht(e){return Be.indexOf(e)>-1}function x(e,t,r){h=[];var o=Se(e),n=[],s="all",a=document,i=0,u=!1,l=!0,p="+",c=!1;for(r===void 0&&typeof t=="function"&&(r=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(s=t.scope),t.element&&(a=t.element),t.keyup&&(u=t.keyup),t.keydown!==void 0&&(l=t.keydown),t.capture!==void 0&&(c=t.capture),typeof t.splitKey=="string"&&(p=t.splitKey)),typeof t=="string"&&(s=t);i<o.length;i++)e=o[i].split(p),n=[],e.length>1&&(n=we(O,e)),e=e[e.length-1],e=e==="*"?"*":H(e),e in w||(w[e]=[]),w[e].push({keyup:u,keydown:l,scope:s,mods:n,shortcut:o[i],method:r,key:o[i],splitKey:p,element:a});typeof a<"u"&&!ht(a)&&window&&(Be.push(a),Q(a,"keydown",function(g){ue(g,a)},c),le||(le=!0,Q(window,"focus",function(){h=[]},c)),Q(a,"keyup",function(g){ue(g,a),_t(g)},c))}function vt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(w).forEach(function(r){var o=w[r].find(function(n){return n.scope===t&&n.shortcut===e});o&&o.method&&o.method()})}var W={setScope:Ce,getScope:D,deleteScope:mt,getPressedKeyCodes:dt,isPressed:gt,filter:pt,trigger:vt,unbind:yt,keyMap:ne,modifier:O,modifierMap:te};for(var X in W)Object.prototype.hasOwnProperty.call(W,X)&&(x[X]=W[X]);if(typeof window<"u"){var bt=window.hotkeys;x.noConflict=function(e){return e&&window.hotkeys===x&&(window.hotkeys=bt),x},window.hotkeys=x}const kt="v1",oe={keyBindings:{moveBlock:"mod+shift+m"},settingsVersion:kt,disabled:!1},wt=()=>{let e=logseq.settings;(!e||e.settingsVersion!=oe.settingsVersion)&&(e=oe,logseq.updateSettings(e))},St=(e,t=void 0)=>{const r=logseq.settings,o=Object.assign(oe,r);return e?o[e]?o[e]:t:o},Et=async function(e){const t=await logseq.Editor.getPageBlocksTree(e);return t.length===0?null:t[0]},R=async function(e){const t=await logseq.Editor.getPageBlocksTree(e);return t.length===0?null:t[t.length-1]},je=async function(e,t=!1){await logseq.Editor.getPage(e)?await R(e)===null&&(await logseq.Editor.deletePage(e),await logseq.Editor.createPage(e,{},{createFirstBlock:!0,redirect:!1,journal:t})):await logseq.Editor.createPage(e,{},{createFirstBlock:!0,redirect:!1,journal:t})};async function Bt(){x("enter",()=>(J().submit(),!1))}const fe=async(e,t)=>{if(!e||!e.content||/^\s+$/gm.test(e.content))return logseq.App.showMsg("Cannot move empty block"),!1;const r=await logseq.App.getUserConfigs(),{to:o,action:n,journal:s,after:a,page:i,at:u}=t;let l,p=!1;switch(o){case"today":l=se.formatInTimeZone(new Date,Intl.DateTimeFormat().resolvedOptions().timeZone,r.preferredDateFormat),p=!0;break;case"contents":l="contents";break;case"current_page":let _=await logseq.Editor.getCurrentPage();if(!_){const f=await logseq.Editor.getCurrentBlock();f&&(_=await logseq.Editor.getPage(f.page.id))}l=_.name;break;case"page":l=i;break;case"journal":s||logseq.App.showMsg("Journal should not be empty"),l=se.formatInTimeZone(s,Intl.DateTimeFormat().resolvedOptions().timeZone,r.preferredDateFormat);break}e?.properties?.id||await logseq.Editor.upsertBlockProperty(e.uuid,"id",e.uuid),await je(l,p);let c;u==="bottom"?c=await R(l):c=await Et(l),await R(l);let g,v;switch(n){case"copy_ref":v=`((${e.uuid}))`;break;case"copy_embed":v=`{{embed ((${e.uuid}))}}`;break;case"copy_content":v=e.content;break}if(c)["copy_ref","copy_embed","copy_content"].includes(n)?c.content?g=await logseq.Editor.insertBlock(c.uuid,v,{before:u!=="bottom",sibling:!0}):(await logseq.Editor.updateBlock(c.uuid,v),g=c):["cut_content","cut_content_and_keep_ref"].includes(n)&&(n==="cut_content_and_keep_ref"&&await logseq.Editor.insertBlock(e.uuid,`((${e.uuid}))`,{before:!1,sibling:!0}),await logseq.Editor.moveBlock(e.uuid,c.uuid,{before:u!=="bottom",children:!1}),g=await logseq.Editor.getBlock(e.uuid));else return logseq.App.showMsg("Target page empty, block movement failed!"),!1;return{targetPage:l,targetBlock:g}},J=ut("target",{state:()=>({fallbackUUID:"",visible:!1,destination:{to:"today",at:"bottom",action:"copy_ref",journal:null,after:"stay",page:""},pages:[]}),actions:{setFallbackUUID(e){this.fallbackUUID=e},clearFallbackUUID(e){this.fallbackUUID=""},async loadPages(){const e=await logseq.DB.datascriptQuery(`
        [:find ?page-name (pull ?page [*])
          :where
          [?page :block/name ?page-name]
          [?page :block/journal? false]
        ]
      `);this.pages=e.map(t=>t[0])},open(){this.visible=!0},hide(){logseq.hideMainUI({restoreEditingCursor:!0})},async submit(){const{to:e,action:t,journal:r,after:o,page:n}=this.destination,s=await logseq.Editor.getSelectedBlocks();let a;if(s&&s.length>1){for(let i of s)if(a=await fe(i,this.destination),!a)return}else{let i=await logseq.Editor.getCurrentBlock();if(i||(i=await logseq.Editor.getBlock(this.fallbackUUID)),i&&(a=await fe(i,this.destination),!a))return}if(o==="jump"&&a){const{targetPage:i,targetBlock:u}=a;i&&u&&await logseq.Editor.scrollToBlockInPage(i,u.uuid)}this.clearFallbackUUID(),logseq.hideMainUI({restoreEditingCursor:!0})}}}),Ct="0.0.12";var qe={exports:{}};(function(e,t){(function(){var r={};e.exports=r,r.simpleFilter=function(o,n){return n.filter(function(s){return r.test(o,s)})},r.test=function(o,n){return r.match(o,n)!==null},r.match=function(o,n,s){s=s||{};var a=0,i=[],u=n.length,l=0,p=0,c=s.pre||"",g=s.post||"",v=s.caseSensitive&&n||n.toLowerCase(),_;o=s.caseSensitive&&o||o.toLowerCase();for(var f=0;f<u;f++)_=n[f],v[f]===o[a]?(_=c+_+g,a+=1,p+=1+p):p=0,l+=p,i[i.length]=_;return a===o.length?(l=v===o?1/0:l,{rendered:i.join(""),score:l}):null},r.filter=function(o,n,s){return!n||n.length===0?[]:typeof o!="string"?n:(s=s||{},n.reduce(function(a,i,u,l){var p=i;s.extract&&(p=s.extract(i));var c=r.match(o,p,s);return c!=null&&(a[a.length]={string:c.rendered,score:c.score,index:u,original:i}),a},[]).sort(function(a,i){var u=i.score-a.score;return u||a.index-i.index}))}})()})(qe);var jt=qe.exports;const qt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},xt=S("path",{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",fill:"currentColor"},null,-1),Pt=[xt];function Ot(e,t){return L(),$e("svg",qt,Pt)}var Kt={render:Ot};const Ut=B(" Move block "),It={class:"text-gray-300 text-xs inline-block mt-1 ml-2"},At=B(" Today's journal "),Mt=B(" Contents "),Lt=B(" Current page "),Ft=B(" A journal "),Dt=B(" A page "),Tt=B(" Bottom "),zt=B(" Top "),$t=B(" Copy block ref "),Vt=B(" A block ref is an unique ID to reference the block "),Rt=B(" Copy block embed "),Nt=B(" Copy content "),Ht=S("span",{class:""},"Cut content",-1),Jt=B(" Cut content and keep ref to target "),Zt=B(" Stay on current page "),Qt=B(" Jump to target page "),Gt=B(" OK "),Wt=Ve({setup(e){const t=J(),r=ye(()=>jt.filter(t.destination.page,t.pages,{}).map(o=>({label:o.original,value:o.original})));return(o,n)=>{const s=Je,a=Ze,i=Qe,u=Ge,l=We,p=Re,c=Xe,g=Ye,v=et,_=Ne;return L(),z(_,{show:y(t).visible,"onUpdate:show":n[7]||(n[7]=f=>y(t).visible=f),"close-on-esc":!0,closable:!0,"mask-closable":!0,"auto-focus":!0,"show-icon":!1,"on-close":y(t).hide,"on-esc":y(t).hide,"on-mask-click":y(t).hide,"transform-origin":"center",preset:"dialog"},{header:d(()=>[Ut,S("span",It,"v"+He(y(Ct)),1)]),action:d(()=>[m(v,{strong:"",secondary:"",type:"primary",onClick:n[6]||(n[6]=f=>y(t).submit())},{default:d(()=>[Gt]),_:1})]),default:d(()=>[m(g,{ref:"formRef","label-width":120,"label-placement":"left",model:y(t).destination,size:"small",onSubmit:y(t).submit},{default:d(()=>[m(i,{label:"To:",path:"to"},{default:d(()=>[m(a,{value:y(t).destination.to,"onUpdate:value":n[0]||(n[0]=f=>y(t).destination.to=f),name:"radiogroup"},{default:d(()=>[S("div",null,[m(s,{key:"today",value:"today"},{default:d(()=>[At]),_:1})]),S("div",null,[m(s,{key:"contents",value:"contents"},{default:d(()=>[Mt]),_:1})]),S("div",null,[m(s,{key:"current_page",value:"current_page"},{default:d(()=>[Lt]),_:1})]),S("div",null,[m(s,{key:"journal",value:"journal"},{default:d(()=>[Ft]),_:1})]),S("div",null,[m(s,{key:"page",value:"page"},{default:d(()=>[Dt]),_:1})])]),_:1},8,["value"])]),_:1}),y(t).destination.to==="journal"?(L(),z(i,{key:0,label:" ",path:"journal"},{default:d(()=>[m(u,{"formatted-value":y(t).destination.journal,"onUpdate:formatted-value":n[1]||(n[1]=f=>y(t).destination.journal=f),"value-format":"yyyy-MM-dd",type:"date",clearable:"",placeholder:"Select journal"},null,8,["formatted-value"])]),_:1})):ae("",!0),y(t).destination.to==="page"?(L(),z(i,{key:1,label:" ",path:"page"},{default:d(()=>[m(l,{value:y(t).destination.page,"onUpdate:value":n[2]||(n[2]=f=>y(t).destination.page=f),"input-props":{autocomplete:"disabled"},options:y(r),placeholder:"Input page name"},null,8,["value","options"])]),_:1})):ae("",!0),m(i,{label:"At:",path:"at"},{default:d(()=>[m(a,{value:y(t).destination.at,"onUpdate:value":n[3]||(n[3]=f=>y(t).destination.at=f),name:"radiogroup"},{default:d(()=>[S("div",null,[m(s,{key:"bottom",value:"bottom"},{default:d(()=>[Tt]),_:1})]),S("div",null,[m(s,{key:"top",value:"top"},{default:d(()=>[zt]),_:1})])]),_:1},8,["value"])]),_:1}),m(i,{label:"Action:",path:"action"},{default:d(()=>[m(a,{value:y(t).destination.action,"onUpdate:value":n[4]||(n[4]=f=>y(t).destination.action=f),name:"radiogroup"},{default:d(()=>[S("div",null,[m(s,{key:"copy_ref",value:"copy_ref"},{default:d(()=>[$t,m(c,{trigger:"hover",class:""},{trigger:d(()=>[m(p,{class:"inline-block ml-1 -mb-[2px]"},{default:d(()=>[m(y(Kt))]),_:1})]),default:d(()=>[Vt]),_:1})]),_:1})]),S("div",null,[m(s,{key:"copy_embed",value:"copy_embed"},{default:d(()=>[Rt]),_:1})]),S("div",null,[m(s,{key:"copy_content",value:"copy_content"},{default:d(()=>[Nt]),_:1})]),S("div",null,[m(s,{key:"cut_content",value:"cut_content",class:""},{default:d(()=>[Ht]),_:1})]),S("div",null,[m(s,{key:"cut_content_and_keep_ref",value:"cut_content_and_keep_ref"},{default:d(()=>[Jt]),_:1})])]),_:1},8,["value"])]),_:1}),m(i,{label:"After:",path:"after"},{default:d(()=>[m(a,{value:y(t).destination.after,"onUpdate:value":n[5]||(n[5]=f=>y(t).destination.after=f),name:"radiogroup"},{default:d(()=>[S("div",null,[m(s,{key:"stay",value:"stay"},{default:d(()=>[Zt]),_:1})]),S("div",null,[m(s,{key:"jump",value:"jump"},{default:d(()=>[Qt]),_:1})])]),_:1},8,["value"])]),_:1})]),_:1},8,["model","onSubmit"])]),_:1},8,["show","on-close","on-esc","on-mask-click"])}}});var Xt=(e,t)=>{const r=e.__vccOpts||e;for(const[o,n]of t)r[o]=n;return r};const Yt={};function eo(e,t){const r=Wt;return L(),z(r)}var to=Xt(Yt,[["render",eo]]);const de=async e=>{const t=await logseq.Editor.getBlock(e.uuid),r=await logseq.App.getUserConfigs();if(t?.properties?.id||await logseq.Editor.upsertBlockProperty(e.uuid,"id",e.uuid),t&&t.content){const o=tt(new Date,r.preferredDateFormat);await je(o,!0);const n=await R(o);n&&(n.content?await logseq.Editor.insertBlock(n.uuid,`((${t.uuid}))`,{sibling:!0}):await logseq.Editor.updateBlock(n.uuid,`((${t.uuid}))`))}};var oo=()=>{logseq.Editor.registerSlashCommand("Copy block ref to today's journal",de),logseq.Editor.registerBlockContextMenuItem("Copy block ref to today's journal",de)},no=()=>{const e=St("keyBindings"),t=async({uuid:r})=>{const o=J();r&&o.setFallbackUUID(r),o.open(),logseq.showMainUI({autoFocus:!0})};logseq.App.registerCommandPalette({key:"move-block",label:"Move block",keybinding:{mode:"global",binding:e.moveBlock}},t),logseq.Editor.registerSlashCommand("Move Block",t),logseq.Editor.registerBlockContextMenuItem("Move Block",t)};async function ro(){wt(),oo();const e=ot(to);e.use(st()),e.mount("#app"),no(),Bt(),logseq.on("ui:visible:changed",t=>{if(!t)return;J().loadPages()})}logseq.ready(ro).catch(console.error);
