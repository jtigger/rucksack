const Sr=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))F(S);new MutationObserver(S=>{for(const z of S)if(z.type==="childList")for(const b of z.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&F(b)}).observe(document,{childList:!0,subtree:!0});function y(S){const z={};return S.integrity&&(z.integrity=S.integrity),S.referrerpolicy&&(z.referrerPolicy=S.referrerpolicy),S.crossorigin==="use-credentials"?z.credentials="include":S.crossorigin==="anonymous"?z.credentials="omit":z.credentials="same-origin",z}function F(S){if(S.ep)return;S.ep=!0;const z=y(S);fetch(S.href,z)}};Sr();var En=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},er={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(i,a){(function(y,F){i.exports=F()})(self,()=>(()=>{var y={227:(b,l,_)=>{var L=_(155);l.formatArgs=function(T){if(T[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+T[0]+(this.useColors?"%c ":" ")+"+"+b.exports.humanize(this.diff),!this.useColors)return;const W="color: "+this.color;T.splice(1,0,W,"color: inherit");let x=0,g=0;T[0].replace(/%[a-zA-Z%]/g,k=>{k!=="%%"&&(x++,k==="%c"&&(g=x))}),T.splice(g,0,W)},l.save=function(T){try{T?l.storage.setItem("debug",T):l.storage.removeItem("debug")}catch{}},l.load=function(){let T;try{T=l.storage.getItem("debug")}catch{}return!T&&L!==void 0&&"env"in L&&(T=L.env.DEBUG),T},l.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},l.storage=function(){try{return localStorage}catch{}}(),l.destroy=(()=>{let T=!1;return()=>{T||(T=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),l.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],l.log=console.debug||console.log||(()=>{}),b.exports=_(447)(l);const{formatters:A}=b.exports;A.j=function(T){try{return JSON.stringify(T)}catch(W){return"[UnexpectedJSONParseError]: "+W.message}}},447:(b,l,_)=>{b.exports=function(L){function A(x){let g,k=null;function v(...H){if(!v.enabled)return;const I=v,U=Number(new Date),J=U-(g||U);I.diff=J,I.prev=g,I.curr=U,g=U,H[0]=A.coerce(H[0]),typeof H[0]!="string"&&H.unshift("%O");let j=0;H[0]=H[0].replace(/%([a-zA-Z%])/g,($,s)=>{if($==="%%")return"%";j++;const c=A.formatters[s];if(typeof c=="function"){const m=H[j];$=c.call(I,m),H.splice(j,1),j--}return $}),A.formatArgs.call(I,H),(I.log||A.log).apply(I,H)}return v.namespace=x,v.useColors=A.useColors(),v.color=A.selectColor(x),v.extend=T,v.destroy=A.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>k===null?A.enabled(x):k,set:H=>{k=H}}),typeof A.init=="function"&&A.init(v),v}function T(x,g){const k=A(this.namespace+(g===void 0?":":g)+x);return k.log=this.log,k}function W(x){return x.toString().substring(2,x.toString().length-2).replace(/\.\*\?$/,"*")}return A.debug=A,A.default=A,A.coerce=function(x){return x instanceof Error?x.stack||x.message:x},A.disable=function(){const x=[...A.names.map(W),...A.skips.map(W).map(g=>"-"+g)].join(",");return A.enable(""),x},A.enable=function(x){let g;A.save(x),A.names=[],A.skips=[];const k=(typeof x=="string"?x:"").split(/[\s,]+/),v=k.length;for(g=0;g<v;g++)k[g]&&((x=k[g].replace(/\*/g,".*?"))[0]==="-"?A.skips.push(new RegExp("^"+x.substr(1)+"$")):A.names.push(new RegExp("^"+x+"$")))},A.enabled=function(x){if(x[x.length-1]==="*")return!0;let g,k;for(g=0,k=A.skips.length;g<k;g++)if(A.skips[g].test(x))return!1;for(g=0,k=A.names.length;g<k;g++)if(A.names[g].test(x))return!0;return!1},A.humanize=_(824),A.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(L).forEach(x=>{A[x]=L[x]}),A.names=[],A.skips=[],A.formatters={},A.selectColor=function(x){let g=0;for(let k=0;k<x.length;k++)g=(g<<5)-g+x.charCodeAt(k),g|=0;return A.colors[Math.abs(g)%A.colors.length]},A.enable(A.load()),A}},856:function(b){b.exports=function(){function l(Q){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(Q)}function _(Q,E){return(_=Object.setPrototypeOf||function(M,te){return M.__proto__=te,M})(Q,E)}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(Q,E,M){return(A=L()?Reflect.construct:function(te,ce,Ae){var tt=[null];tt.push.apply(tt,ce);var Je=new(Function.bind.apply(te,tt));return Ae&&_(Je,Ae.prototype),Je}).apply(null,arguments)}function T(Q){return function(E){if(Array.isArray(E))return W(E)}(Q)||function(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}(Q)||function(E,M){if(E){if(typeof E=="string")return W(E,M);var te=Object.prototype.toString.call(E).slice(8,-1);return te==="Object"&&E.constructor&&(te=E.constructor.name),te==="Map"||te==="Set"?Array.from(E):te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te)?W(E,M):void 0}}(Q)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function W(Q,E){(E==null||E>Q.length)&&(E=Q.length);for(var M=0,te=new Array(E);M<E;M++)te[M]=Q[M];return te}var x=Object.hasOwnProperty,g=Object.setPrototypeOf,k=Object.isFrozen,v=Object.getPrototypeOf,H=Object.getOwnPropertyDescriptor,I=Object.freeze,U=Object.seal,J=Object.create,j=typeof Reflect<"u"&&Reflect,$=j.apply,s=j.construct;$||($=function(Q,E,M){return Q.apply(E,M)}),I||(I=function(Q){return Q}),U||(U=function(Q){return Q}),s||(s=function(Q,E){return A(Q,T(E))});var c,m=d(Array.prototype.forEach),B=d(Array.prototype.pop),Z=d(Array.prototype.push),ne=d(String.prototype.toLowerCase),le=d(String.prototype.match),de=d(String.prototype.replace),Ee=d(String.prototype.indexOf),Se=d(String.prototype.trim),pe=d(RegExp.prototype.test),Xe=(c=TypeError,function(){for(var Q=arguments.length,E=new Array(Q),M=0;M<Q;M++)E[M]=arguments[M];return s(c,E)});function d(Q){return function(E){for(var M=arguments.length,te=new Array(M>1?M-1:0),ce=1;ce<M;ce++)te[ce-1]=arguments[ce];return $(Q,E,te)}}function f(Q,E){g&&g(Q,null);for(var M=E.length;M--;){var te=E[M];if(typeof te=="string"){var ce=ne(te);ce!==te&&(k(E)||(E[M]=ce),te=ce)}Q[te]=!0}return Q}function N(Q){var E,M=J(null);for(E in Q)$(x,Q,[E])&&(M[E]=Q[E]);return M}function se(Q,E){for(;Q!==null;){var M=H(Q,E);if(M){if(M.get)return d(M.get);if(typeof M.value=="function")return d(M.value)}Q=v(Q)}return function(te){return console.warn("fallback value for",te),null}}var we=I(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ye=I(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ee=I(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ge=I(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_e=I(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),xe=I(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ge=I(["#text"]),Le=I(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),fe=I(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ae=I(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),be=I(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),De=U(/\{\{[\w\W]*|[\w\W]*\}\}/gm),et=U(/<%[\w\W]*|[\w\W]*%>/gm),Qe=U(/^data-[\-\w.\u00B7-\uFFFF]/),Ve=U(/^aria-[\-\w]+$/),mt=U(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),at=U(/^(?:\w+script|data):/i),on=U(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Tn=U(/^html$/i),sn=function(){return typeof window>"u"?null:window},On=function(Q,E){if(l(Q)!=="object"||typeof Q.createPolicy!="function")return null;var M=null,te="data-tt-policy-suffix";E.currentScript&&E.currentScript.hasAttribute(te)&&(M=E.currentScript.getAttribute(te));var ce="dompurify"+(M?"#"+M:"");try{return Q.createPolicy(ce,{createHTML:function(Ae){return Ae}})}catch{return console.warn("TrustedTypes policy "+ce+" could not be created."),null}};return function Q(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sn(),M=function(r){return Q(r)};if(M.version="2.3.8",M.removed=[],!E||!E.document||E.document.nodeType!==9)return M.isSupported=!1,M;var te=E.document,ce=E.document,Ae=E.DocumentFragment,tt=E.HTMLTemplateElement,Je=E.Node,an=E.Element,Tt=E.NodeFilter,yt=E.NamedNodeMap,Ot=yt===void 0?E.NamedNodeMap||E.MozNamedAttrMap:yt,ln=E.HTMLFormElement,Ft=E.DOMParser,cn=E.trustedTypes,lt=an.prototype,un=se(lt,"cloneNode"),dn=se(lt,"nextSibling"),Fn=se(lt,"childNodes"),jt=se(lt,"parentNode");if(typeof tt=="function"){var bt=ce.createElement("template");bt.content&&bt.content.ownerDocument&&(ce=bt.content.ownerDocument)}var qe=On(cn,te),pn=qe?qe.createHTML(""):"",re=ce,vt=re.implementation,ct=re.createNodeIterator,Bt=re.createDocumentFragment,gn=re.getElementsByTagName,fn=te.importNode,Pt={};try{Pt=N(ce).documentMode?ce.documentMode:{}}catch{}var Te={};M.isSupported=typeof jt=="function"&&vt&&vt.createHTMLDocument!==void 0&&Pt!==9;var ut,Ze,Mt=De,_t=et,jn=Qe,Bn=Ve,Pn=at,hn=on,xt=mt,ve=null,mn=f({},[].concat(T(we),T(ye),T(ee),T(_e),T(Ge))),ke=null,Dt=f({},[].concat(T(Le),T(fe),T(ae),T(be))),he=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),nt=null,It=null,yn=!0,Nt=!0,bn=!1,Ue=!1,Ie=!1,zt=!1,qt=!1,rt=!1,dt=!1,pt=!1,gt=!0,Ut=!0,Ye=!1,ot={},it=null,Rt=f({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Re=null,vn=f({},["audio","video","img","source","image","track"]),$t=null,kt=f({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ht="http://www.w3.org/1998/Math/MathML",Wt="http://www.w3.org/2000/svg",$e="http://www.w3.org/1999/xhtml",wt=$e,Gt=!1,Qt=["application/xhtml+xml","text/html"],Mn="text/html",st=null,Dn=ce.createElement("form"),_n=function(r){return r instanceof RegExp||r instanceof Function},Be=function(r){st&&st===r||(r&&l(r)==="object"||(r={}),r=N(r),ve="ALLOWED_TAGS"in r?f({},r.ALLOWED_TAGS):mn,ke="ALLOWED_ATTR"in r?f({},r.ALLOWED_ATTR):Dt,$t="ADD_URI_SAFE_ATTR"in r?f(N(kt),r.ADD_URI_SAFE_ATTR):kt,Re="ADD_DATA_URI_TAGS"in r?f(N(vn),r.ADD_DATA_URI_TAGS):vn,it="FORBID_CONTENTS"in r?f({},r.FORBID_CONTENTS):Rt,nt="FORBID_TAGS"in r?f({},r.FORBID_TAGS):{},It="FORBID_ATTR"in r?f({},r.FORBID_ATTR):{},ot="USE_PROFILES"in r&&r.USE_PROFILES,yn=r.ALLOW_ARIA_ATTR!==!1,Nt=r.ALLOW_DATA_ATTR!==!1,bn=r.ALLOW_UNKNOWN_PROTOCOLS||!1,Ue=r.SAFE_FOR_TEMPLATES||!1,Ie=r.WHOLE_DOCUMENT||!1,rt=r.RETURN_DOM||!1,dt=r.RETURN_DOM_FRAGMENT||!1,pt=r.RETURN_TRUSTED_TYPE||!1,qt=r.FORCE_BODY||!1,gt=r.SANITIZE_DOM!==!1,Ut=r.KEEP_CONTENT!==!1,Ye=r.IN_PLACE||!1,xt=r.ALLOWED_URI_REGEXP||xt,wt=r.NAMESPACE||$e,r.CUSTOM_ELEMENT_HANDLING&&_n(r.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(he.tagNameCheck=r.CUSTOM_ELEMENT_HANDLING.tagNameCheck),r.CUSTOM_ELEMENT_HANDLING&&_n(r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(he.attributeNameCheck=r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),r.CUSTOM_ELEMENT_HANDLING&&typeof r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(he.allowCustomizedBuiltInElements=r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ut=ut=Qt.indexOf(r.PARSER_MEDIA_TYPE)===-1?Mn:r.PARSER_MEDIA_TYPE,Ze=ut==="application/xhtml+xml"?function(O){return O}:ne,Ue&&(Nt=!1),dt&&(rt=!0),ot&&(ve=f({},T(Ge)),ke=[],ot.html===!0&&(f(ve,we),f(ke,Le)),ot.svg===!0&&(f(ve,ye),f(ke,fe),f(ke,be)),ot.svgFilters===!0&&(f(ve,ee),f(ke,fe),f(ke,be)),ot.mathMl===!0&&(f(ve,_e),f(ke,ae),f(ke,be))),r.ADD_TAGS&&(ve===mn&&(ve=N(ve)),f(ve,r.ADD_TAGS)),r.ADD_ATTR&&(ke===Dt&&(ke=N(ke)),f(ke,r.ADD_ATTR)),r.ADD_URI_SAFE_ATTR&&f($t,r.ADD_URI_SAFE_ATTR),r.FORBID_CONTENTS&&(it===Rt&&(it=N(it)),f(it,r.FORBID_CONTENTS)),Ut&&(ve["#text"]=!0),Ie&&f(ve,["html","head","body"]),ve.table&&(f(ve,["tbody"]),delete nt.tbody),I&&I(r),st=r)},ft=f({},["mi","mo","mn","ms","mtext"]),Vt=f({},["foreignobject","desc","title","annotation-xml"]),Ct=f({},["title","style","font","a","script"]),St=f({},ye);f(St,ee),f(St,ge);var Jt=f({},_e);f(Jt,xe);var In=function(r){var O=jt(r);O&&O.tagName||(O={namespaceURI:$e,tagName:"template"});var w=ne(r.tagName),oe=ne(O.tagName);return r.namespaceURI===Wt?O.namespaceURI===$e?w==="svg":O.namespaceURI===Ht?w==="svg"&&(oe==="annotation-xml"||ft[oe]):Boolean(St[w]):r.namespaceURI===Ht?O.namespaceURI===$e?w==="math":O.namespaceURI===Wt?w==="math"&&Vt[oe]:Boolean(Jt[w]):r.namespaceURI===$e&&!(O.namespaceURI===Wt&&!Vt[oe])&&!(O.namespaceURI===Ht&&!ft[oe])&&!Jt[w]&&(Ct[w]||!St[w])},Pe=function(r){Z(M.removed,{element:r});try{r.parentNode.removeChild(r)}catch{try{r.outerHTML=pn}catch{r.remove()}}},xn=function(r,O){try{Z(M.removed,{attribute:O.getAttributeNode(r),from:O})}catch{Z(M.removed,{attribute:null,from:O})}if(O.removeAttribute(r),r==="is"&&!ke[r])if(rt||dt)try{Pe(O)}catch{}else try{O.setAttribute(r,"")}catch{}},Et=function(r){var O,w;if(qt)r="<remove></remove>"+r;else{var oe=le(r,/^[\r\n\t ]+/);w=oe&&oe[0]}ut==="application/xhtml+xml"&&(r='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+r+"</body></html>");var t=qe?qe.createHTML(r):r;if(wt===$e)try{O=new Ft().parseFromString(t,ut)}catch{}if(!O||!O.documentElement){O=vt.createDocument(wt,"template",null);try{O.documentElement.innerHTML=Gt?"":t}catch{}}var e=O.body||O.documentElement;return r&&w&&e.insertBefore(ce.createTextNode(w),e.childNodes[0]||null),wt===$e?gn.call(O,Ie?"html":"body")[0]:Ie?O.documentElement:e},kn=function(r){return ct.call(r.ownerDocument||r,r,Tt.SHOW_ELEMENT|Tt.SHOW_COMMENT|Tt.SHOW_TEXT,null,!1)},Nn=function(r){return r instanceof ln&&(typeof r.nodeName!="string"||typeof r.textContent!="string"||typeof r.removeChild!="function"||!(r.attributes instanceof Ot)||typeof r.removeAttribute!="function"||typeof r.setAttribute!="function"||typeof r.namespaceURI!="string"||typeof r.insertBefore!="function")},Ne=function(r){return l(Je)==="object"?r instanceof Je:r&&l(r)==="object"&&typeof r.nodeType=="number"&&typeof r.nodeName=="string"},Oe=function(r,O,w){Te[r]&&m(Te[r],function(oe){oe.call(M,O,w,st)})},wn=function(r){var O;if(Oe("beforeSanitizeElements",r,null),Nn(r)||pe(/[\u0080-\uFFFF]/,r.nodeName))return Pe(r),!0;var w=Ze(r.nodeName);if(Oe("uponSanitizeElement",r,{tagName:w,allowedTags:ve}),r.hasChildNodes()&&!Ne(r.firstElementChild)&&(!Ne(r.content)||!Ne(r.content.firstElementChild))&&pe(/<[/\w]/g,r.innerHTML)&&pe(/<[/\w]/g,r.textContent)||w==="select"&&pe(/<template/i,r.innerHTML))return Pe(r),!0;if(!ve[w]||nt[w]){if(!nt[w]&&Cn(w)&&(he.tagNameCheck instanceof RegExp&&pe(he.tagNameCheck,w)||he.tagNameCheck instanceof Function&&he.tagNameCheck(w)))return!1;if(Ut&&!it[w]){var oe=jt(r)||r.parentNode,t=Fn(r)||r.childNodes;if(t&&oe)for(var e=t.length-1;e>=0;--e)oe.insertBefore(un(t[e],!0),dn(r))}return Pe(r),!0}return r instanceof an&&!In(r)?(Pe(r),!0):w!=="noscript"&&w!=="noembed"||!pe(/<\/no(script|embed)/i,r.innerHTML)?(Ue&&r.nodeType===3&&(O=r.textContent,O=de(O,Mt," "),O=de(O,_t," "),r.textContent!==O&&(Z(M.removed,{element:r.cloneNode()}),r.textContent=O)),Oe("afterSanitizeElements",r,null),!1):(Pe(r),!0)},Zt=function(r,O,w){if(gt&&(O==="id"||O==="name")&&(w in ce||w in Dn))return!1;if(!(Nt&&!It[O]&&pe(jn,O))){if(!(yn&&pe(Bn,O))){if(!ke[O]||It[O]){if(!(Cn(r)&&(he.tagNameCheck instanceof RegExp&&pe(he.tagNameCheck,r)||he.tagNameCheck instanceof Function&&he.tagNameCheck(r))&&(he.attributeNameCheck instanceof RegExp&&pe(he.attributeNameCheck,O)||he.attributeNameCheck instanceof Function&&he.attributeNameCheck(O))||O==="is"&&he.allowCustomizedBuiltInElements&&(he.tagNameCheck instanceof RegExp&&pe(he.tagNameCheck,w)||he.tagNameCheck instanceof Function&&he.tagNameCheck(w))))return!1}else if(!$t[O]){if(!pe(xt,de(w,hn,""))){if((O!=="src"&&O!=="xlink:href"&&O!=="href"||r==="script"||Ee(w,"data:")!==0||!Re[r])&&!(bn&&!pe(Pn,de(w,hn,"")))){if(w)return!1}}}}}return!0},Cn=function(r){return r.indexOf("-")>0},Sn=function(r){var O,w,oe,t;Oe("beforeSanitizeAttributes",r,null);var e=r.attributes;if(e){var n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};for(t=e.length;t--;){var o=O=e[t],u=o.name,p=o.namespaceURI;if(w=u==="value"?O.value:Se(O.value),oe=Ze(u),n.attrName=oe,n.attrValue=w,n.keepAttr=!0,n.forceKeepAttr=void 0,Oe("uponSanitizeAttribute",r,n),w=n.attrValue,!n.forceKeepAttr&&(xn(u,r),n.keepAttr))if(pe(/\/>/i,w))xn(u,r);else{Ue&&(w=de(w,Mt," "),w=de(w,_t," "));var h=Ze(r.nodeName);if(Zt(h,oe,w))try{p?r.setAttributeNS(p,u,w):r.setAttribute(u,w),B(M.removed)}catch{}}}Oe("afterSanitizeAttributes",r,null)}},zn=function r(O){var w,oe=kn(O);for(Oe("beforeSanitizeShadowDOM",O,null);w=oe.nextNode();)Oe("uponSanitizeShadowNode",w,null),wn(w)||(w.content instanceof Ae&&r(w.content),Sn(w));Oe("afterSanitizeShadowDOM",O,null)};return M.sanitize=function(r,O){var w,oe,t,e,n;if((Gt=!r)&&(r="<!-->"),typeof r!="string"&&!Ne(r)){if(typeof r.toString!="function")throw Xe("toString is not a function");if(typeof(r=r.toString())!="string")throw Xe("dirty is not a string, aborting")}if(!M.isSupported){if(l(E.toStaticHTML)==="object"||typeof E.toStaticHTML=="function"){if(typeof r=="string")return E.toStaticHTML(r);if(Ne(r))return E.toStaticHTML(r.outerHTML)}return r}if(zt||Be(O),M.removed=[],typeof r=="string"&&(Ye=!1),Ye){if(r.nodeName){var o=Ze(r.nodeName);if(!ve[o]||nt[o])throw Xe("root node is forbidden and cannot be sanitized in-place")}}else if(r instanceof Je)(oe=(w=Et("<!---->")).ownerDocument.importNode(r,!0)).nodeType===1&&oe.nodeName==="BODY"||oe.nodeName==="HTML"?w=oe:w.appendChild(oe);else{if(!rt&&!Ue&&!Ie&&r.indexOf("<")===-1)return qe&&pt?qe.createHTML(r):r;if(!(w=Et(r)))return rt?null:pt?pn:""}w&&qt&&Pe(w.firstChild);for(var u=kn(Ye?r:w);t=u.nextNode();)t.nodeType===3&&t===e||wn(t)||(t.content instanceof Ae&&zn(t.content),Sn(t),e=t);if(e=null,Ye)return r;if(rt){if(dt)for(n=Bt.call(w.ownerDocument);w.firstChild;)n.appendChild(w.firstChild);else n=w;return ke.shadowroot&&(n=fn.call(te,n,!0)),n}var p=Ie?w.outerHTML:w.innerHTML;return Ie&&ve["!doctype"]&&w.ownerDocument&&w.ownerDocument.doctype&&w.ownerDocument.doctype.name&&pe(Tn,w.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+w.ownerDocument.doctype.name+`>
`+p),Ue&&(p=de(p,Mt," "),p=de(p,_t," ")),qe&&pt?qe.createHTML(p):p},M.setConfig=function(r){Be(r),zt=!0},M.clearConfig=function(){st=null,zt=!1},M.isValidAttribute=function(r,O,w){st||Be({});var oe=Ze(r),t=Ze(O);return Zt(oe,t,w)},M.addHook=function(r,O){typeof O=="function"&&(Te[r]=Te[r]||[],Z(Te[r],O))},M.removeHook=function(r){if(Te[r])return B(Te[r])},M.removeHooks=function(r){Te[r]&&(Te[r]=[])},M.removeAllHooks=function(){Te={}},M}()}()},729:b=>{var l=Object.prototype.hasOwnProperty,_="~";function L(){}function A(g,k,v){this.fn=g,this.context=k,this.once=v||!1}function T(g,k,v,H,I){if(typeof v!="function")throw new TypeError("The listener must be a function");var U=new A(v,H||g,I),J=_?_+k:k;return g._events[J]?g._events[J].fn?g._events[J]=[g._events[J],U]:g._events[J].push(U):(g._events[J]=U,g._eventsCount++),g}function W(g,k){--g._eventsCount==0?g._events=new L:delete g._events[k]}function x(){this._events=new L,this._eventsCount=0}Object.create&&(L.prototype=Object.create(null),new L().__proto__||(_=!1)),x.prototype.eventNames=function(){var g,k,v=[];if(this._eventsCount===0)return v;for(k in g=this._events)l.call(g,k)&&v.push(_?k.slice(1):k);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(g)):v},x.prototype.listeners=function(g){var k=_?_+g:g,v=this._events[k];if(!v)return[];if(v.fn)return[v.fn];for(var H=0,I=v.length,U=new Array(I);H<I;H++)U[H]=v[H].fn;return U},x.prototype.listenerCount=function(g){var k=_?_+g:g,v=this._events[k];return v?v.fn?1:v.length:0},x.prototype.emit=function(g,k,v,H,I,U){var J=_?_+g:g;if(!this._events[J])return!1;var j,$,s=this._events[J],c=arguments.length;if(s.fn){switch(s.once&&this.removeListener(g,s.fn,void 0,!0),c){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,k),!0;case 3:return s.fn.call(s.context,k,v),!0;case 4:return s.fn.call(s.context,k,v,H),!0;case 5:return s.fn.call(s.context,k,v,H,I),!0;case 6:return s.fn.call(s.context,k,v,H,I,U),!0}for($=1,j=new Array(c-1);$<c;$++)j[$-1]=arguments[$];s.fn.apply(s.context,j)}else{var m,B=s.length;for($=0;$<B;$++)switch(s[$].once&&this.removeListener(g,s[$].fn,void 0,!0),c){case 1:s[$].fn.call(s[$].context);break;case 2:s[$].fn.call(s[$].context,k);break;case 3:s[$].fn.call(s[$].context,k,v);break;case 4:s[$].fn.call(s[$].context,k,v,H);break;default:if(!j)for(m=1,j=new Array(c-1);m<c;m++)j[m-1]=arguments[m];s[$].fn.apply(s[$].context,j)}}return!0},x.prototype.on=function(g,k,v){return T(this,g,k,v,!1)},x.prototype.once=function(g,k,v){return T(this,g,k,v,!0)},x.prototype.removeListener=function(g,k,v,H){var I=_?_+g:g;if(!this._events[I])return this;if(!k)return W(this,I),this;var U=this._events[I];if(U.fn)U.fn!==k||H&&!U.once||v&&U.context!==v||W(this,I);else{for(var J=0,j=[],$=U.length;J<$;J++)(U[J].fn!==k||H&&!U[J].once||v&&U[J].context!==v)&&j.push(U[J]);j.length?this._events[I]=j.length===1?j[0]:j:W(this,I)}return this},x.prototype.removeAllListeners=function(g){var k;return g?(k=_?_+g:g,this._events[k]&&W(this,k)):(this._events=new L,this._eventsCount=0),this},x.prototype.off=x.prototype.removeListener,x.prototype.addListener=x.prototype.on,x.prefixed=_,x.EventEmitter=x,b.exports=x},717:b=>{typeof Object.create=="function"?b.exports=function(l,_){l.super_=_,l.prototype=Object.create(_.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(l,_){l.super_=_;var L=function(){};L.prototype=_.prototype,l.prototype=new L,l.prototype.constructor=l}},824:b=>{var l=1e3,_=60*l,L=60*_,A=24*L;function T(W,x,g,k){var v=x>=1.5*g;return Math.round(W/g)+" "+k+(v?"s":"")}b.exports=function(W,x){x=x||{};var g,k,v=typeof W;if(v==="string"&&W.length>0)return function(H){if(!((H=String(H)).length>100)){var I=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(H);if(I){var U=parseFloat(I[1]);switch((I[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*U;case"weeks":case"week":case"w":return 6048e5*U;case"days":case"day":case"d":return U*A;case"hours":case"hour":case"hrs":case"hr":case"h":return U*L;case"minutes":case"minute":case"mins":case"min":case"m":return U*_;case"seconds":case"second":case"secs":case"sec":case"s":return U*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return U;default:return}}}}(W);if(v==="number"&&isFinite(W))return x.long?(g=W,(k=Math.abs(g))>=A?T(g,k,A,"day"):k>=L?T(g,k,L,"hour"):k>=_?T(g,k,_,"minute"):k>=l?T(g,k,l,"second"):g+" ms"):function(H){var I=Math.abs(H);return I>=A?Math.round(H/A)+"d":I>=L?Math.round(H/L)+"h":I>=_?Math.round(H/_)+"m":I>=l?Math.round(H/l)+"s":H+"ms"}(W);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(W))}},520:(b,l,_)=>{var L=_(155),A=L.platform==="win32",T=_(539);function W(s,c){for(var m=[],B=0;B<s.length;B++){var Z=s[B];Z&&Z!=="."&&(Z===".."?m.length&&m[m.length-1]!==".."?m.pop():c&&m.push(".."):m.push(Z))}return m}function x(s){for(var c=s.length-1,m=0;m<=c&&!s[m];m++);for(var B=c;B>=0&&!s[B];B--);return m===0&&B===c?s:m>B?[]:s.slice(m,B+1)}var g=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,k=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,v={};function H(s){var c=g.exec(s),m=(c[1]||"")+(c[2]||""),B=c[3]||"",Z=k.exec(B);return[m,Z[1],Z[2],Z[3]]}function I(s){var c=g.exec(s),m=c[1]||"",B=!!m&&m[1]!==":";return{device:m,isUnc:B,isAbsolute:B||!!c[2],tail:c[3]}}function U(s){return"\\\\"+s.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}v.resolve=function(){for(var s="",c="",m=!1,B=arguments.length-1;B>=-1;B--){var Z;if(B>=0?Z=arguments[B]:s?(Z=L.env["="+s])&&Z.substr(0,3).toLowerCase()===s.toLowerCase()+"\\"||(Z=s+"\\"):Z=L.cwd(),!T.isString(Z))throw new TypeError("Arguments to path.resolve must be strings");if(Z){var ne=I(Z),le=ne.device,de=ne.isUnc,Ee=ne.isAbsolute,Se=ne.tail;if((!le||!s||le.toLowerCase()===s.toLowerCase())&&(s||(s=le),m||(c=Se+"\\"+c,m=Ee),s&&m))break}}return de&&(s=U(s)),s+(m?"\\":"")+(c=W(c.split(/[\\\/]+/),!m).join("\\"))||"."},v.normalize=function(s){var c=I(s),m=c.device,B=c.isUnc,Z=c.isAbsolute,ne=c.tail,le=/[\\\/]$/.test(ne);return(ne=W(ne.split(/[\\\/]+/),!Z).join("\\"))||Z||(ne="."),ne&&le&&(ne+="\\"),B&&(m=U(m)),m+(Z?"\\":"")+ne},v.isAbsolute=function(s){return I(s).isAbsolute},v.join=function(){for(var s=[],c=0;c<arguments.length;c++){var m=arguments[c];if(!T.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&s.push(m)}var B=s.join("\\");return/^[\\\/]{2}[^\\\/]/.test(s[0])||(B=B.replace(/^[\\\/]{2,}/,"\\")),v.normalize(B)},v.relative=function(s,c){s=v.resolve(s),c=v.resolve(c);for(var m=s.toLowerCase(),B=c.toLowerCase(),Z=x(c.split("\\")),ne=x(m.split("\\")),le=x(B.split("\\")),de=Math.min(ne.length,le.length),Ee=de,Se=0;Se<de;Se++)if(ne[Se]!==le[Se]){Ee=Se;break}if(Ee==0)return c;var pe=[];for(Se=Ee;Se<ne.length;Se++)pe.push("..");return(pe=pe.concat(Z.slice(Ee))).join("\\")},v._makeLong=function(s){if(!T.isString(s))return s;if(!s)return"";var c=v.resolve(s);return/^[a-zA-Z]\:\\/.test(c)?"\\\\?\\"+c:/^\\\\[^?.]/.test(c)?"\\\\?\\UNC\\"+c.substring(2):s},v.dirname=function(s){var c=H(s),m=c[0],B=c[1];return m||B?(B&&(B=B.substr(0,B.length-1)),m+B):"."},v.basename=function(s,c){var m=H(s)[2];return c&&m.substr(-1*c.length)===c&&(m=m.substr(0,m.length-c.length)),m},v.extname=function(s){return H(s)[3]},v.format=function(s){if(!T.isObject(s))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);var c=s.root||"";if(!T.isString(c))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);var m=s.dir,B=s.base||"";return m?m[m.length-1]===v.sep?m+B:m+v.sep+B:B},v.parse=function(s){if(!T.isString(s))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof s);var c=H(s);if(!c||c.length!==4)throw new TypeError("Invalid path '"+s+"'");return{root:c[0],dir:c[0]+c[1].slice(0,-1),base:c[2],ext:c[3],name:c[2].slice(0,c[2].length-c[3].length)}},v.sep="\\",v.delimiter=";";var J=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,j={};function $(s){return J.exec(s).slice(1)}j.resolve=function(){for(var s="",c=!1,m=arguments.length-1;m>=-1&&!c;m--){var B=m>=0?arguments[m]:L.cwd();if(!T.isString(B))throw new TypeError("Arguments to path.resolve must be strings");B&&(s=B+"/"+s,c=B[0]==="/")}return(c?"/":"")+(s=W(s.split("/"),!c).join("/"))||"."},j.normalize=function(s){var c=j.isAbsolute(s),m=s&&s[s.length-1]==="/";return(s=W(s.split("/"),!c).join("/"))||c||(s="."),s&&m&&(s+="/"),(c?"/":"")+s},j.isAbsolute=function(s){return s.charAt(0)==="/"},j.join=function(){for(var s="",c=0;c<arguments.length;c++){var m=arguments[c];if(!T.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&(s+=s?"/"+m:m)}return j.normalize(s)},j.relative=function(s,c){s=j.resolve(s).substr(1),c=j.resolve(c).substr(1);for(var m=x(s.split("/")),B=x(c.split("/")),Z=Math.min(m.length,B.length),ne=Z,le=0;le<Z;le++)if(m[le]!==B[le]){ne=le;break}var de=[];for(le=ne;le<m.length;le++)de.push("..");return(de=de.concat(B.slice(ne))).join("/")},j._makeLong=function(s){return s},j.dirname=function(s){var c=$(s),m=c[0],B=c[1];return m||B?(B&&(B=B.substr(0,B.length-1)),m+B):"."},j.basename=function(s,c){var m=$(s)[2];return c&&m.substr(-1*c.length)===c&&(m=m.substr(0,m.length-c.length)),m},j.extname=function(s){return $(s)[3]},j.format=function(s){if(!T.isObject(s))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);var c=s.root||"";if(!T.isString(c))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);return(s.dir?s.dir+j.sep:"")+(s.base||"")},j.parse=function(s){if(!T.isString(s))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof s);var c=$(s);if(!c||c.length!==4)throw new TypeError("Invalid path '"+s+"'");return c[1]=c[1]||"",c[2]=c[2]||"",c[3]=c[3]||"",{root:c[0],dir:c[0]+c[1].slice(0,-1),base:c[2],ext:c[3],name:c[2].slice(0,c[2].length-c[3].length)}},j.sep="/",j.delimiter=":",b.exports=A?v:j,b.exports.posix=j,b.exports.win32=v},155:b=>{var l,_,L=b.exports={};function A(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}function W(j){if(l===setTimeout)return setTimeout(j,0);if((l===A||!l)&&setTimeout)return l=setTimeout,setTimeout(j,0);try{return l(j,0)}catch{try{return l.call(null,j,0)}catch{return l.call(this,j,0)}}}(function(){try{l=typeof setTimeout=="function"?setTimeout:A}catch{l=A}try{_=typeof clearTimeout=="function"?clearTimeout:T}catch{_=T}})();var x,g=[],k=!1,v=-1;function H(){k&&x&&(k=!1,x.length?g=x.concat(g):v=-1,g.length&&I())}function I(){if(!k){var j=W(H);k=!0;for(var $=g.length;$;){for(x=g,g=[];++v<$;)x&&x[v].run();v=-1,$=g.length}x=null,k=!1,function(s){if(_===clearTimeout)return clearTimeout(s);if((_===T||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(s);try{_(s)}catch{try{return _.call(null,s)}catch{return _.call(this,s)}}}(j)}}function U(j,$){this.fun=j,this.array=$}function J(){}L.nextTick=function(j){var $=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)$[s-1]=arguments[s];g.push(new U(j,$)),g.length!==1||k||W(I)},U.prototype.run=function(){this.fun.apply(null,this.array)},L.title="browser",L.browser=!0,L.env={},L.argv=[],L.version="",L.versions={},L.on=J,L.addListener=J,L.once=J,L.off=J,L.removeListener=J,L.removeAllListeners=J,L.emit=J,L.prependListener=J,L.prependOnceListener=J,L.listeners=function(j){return[]},L.binding=function(j){throw new Error("process.binding is not supported")},L.cwd=function(){return"/"},L.chdir=function(j){throw new Error("process.chdir is not supported")},L.umask=function(){return 0}},384:b=>{b.exports=function(l){return l&&typeof l=="object"&&typeof l.copy=="function"&&typeof l.fill=="function"&&typeof l.readUInt8=="function"}},539:(b,l,_)=>{var L=_(155),A=/%[sdj%]/g;l.format=function(d){if(!s(d)){for(var f=[],N=0;N<arguments.length;N++)f.push(x(arguments[N]));return f.join(" ")}N=1;for(var se=arguments,we=se.length,ye=String(d).replace(A,function(ge){if(ge==="%%")return"%";if(N>=we)return ge;switch(ge){case"%s":return String(se[N++]);case"%d":return Number(se[N++]);case"%j":try{return JSON.stringify(se[N++])}catch{return"[Circular]"}default:return ge}}),ee=se[N];N<we;ee=se[++N])j(ee)||!B(ee)?ye+=" "+ee:ye+=" "+x(ee);return ye},l.deprecate=function(d,f){if(c(_.g.process))return function(){return l.deprecate(d,f).apply(this,arguments)};if(L.noDeprecation===!0)return d;var N=!1;return function(){if(!N){if(L.throwDeprecation)throw new Error(f);L.traceDeprecation?console.trace(f):console.error(f),N=!0}return d.apply(this,arguments)}};var T,W={};function x(d,f){var N={seen:[],stylize:k};return arguments.length>=3&&(N.depth=arguments[2]),arguments.length>=4&&(N.colors=arguments[3]),J(f)?N.showHidden=f:f&&l._extend(N,f),c(N.showHidden)&&(N.showHidden=!1),c(N.depth)&&(N.depth=2),c(N.colors)&&(N.colors=!1),c(N.customInspect)&&(N.customInspect=!0),N.colors&&(N.stylize=g),v(N,d,N.depth)}function g(d,f){var N=x.styles[f];return N?"\x1B["+x.colors[N][0]+"m"+d+"\x1B["+x.colors[N][1]+"m":d}function k(d,f){return d}function v(d,f,N){if(d.customInspect&&f&&le(f.inspect)&&f.inspect!==l.inspect&&(!f.constructor||f.constructor.prototype!==f)){var se=f.inspect(N,d);return s(se)||(se=v(d,se,N)),se}var we=function(fe,ae){if(c(ae))return fe.stylize("undefined","undefined");if(s(ae)){var be="'"+JSON.stringify(ae).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return fe.stylize(be,"string")}return $(ae)?fe.stylize(""+ae,"number"):J(ae)?fe.stylize(""+ae,"boolean"):j(ae)?fe.stylize("null","null"):void 0}(d,f);if(we)return we;var ye=Object.keys(f),ee=function(fe){var ae={};return fe.forEach(function(be,De){ae[be]=!0}),ae}(ye);if(d.showHidden&&(ye=Object.getOwnPropertyNames(f)),ne(f)&&(ye.indexOf("message")>=0||ye.indexOf("description")>=0))return H(f);if(ye.length===0){if(le(f)){var ge=f.name?": "+f.name:"";return d.stylize("[Function"+ge+"]","special")}if(m(f))return d.stylize(RegExp.prototype.toString.call(f),"regexp");if(Z(f))return d.stylize(Date.prototype.toString.call(f),"date");if(ne(f))return H(f)}var _e,xe="",Ge=!1,Le=["{","}"];return U(f)&&(Ge=!0,Le=["[","]"]),le(f)&&(xe=" [Function"+(f.name?": "+f.name:"")+"]"),m(f)&&(xe=" "+RegExp.prototype.toString.call(f)),Z(f)&&(xe=" "+Date.prototype.toUTCString.call(f)),ne(f)&&(xe=" "+H(f)),ye.length!==0||Ge&&f.length!=0?N<0?m(f)?d.stylize(RegExp.prototype.toString.call(f),"regexp"):d.stylize("[Object]","special"):(d.seen.push(f),_e=Ge?function(fe,ae,be,De,et){for(var Qe=[],Ve=0,mt=ae.length;Ve<mt;++Ve)Xe(ae,String(Ve))?Qe.push(I(fe,ae,be,De,String(Ve),!0)):Qe.push("");return et.forEach(function(at){at.match(/^\d+$/)||Qe.push(I(fe,ae,be,De,at,!0))}),Qe}(d,f,N,ee,ye):ye.map(function(fe){return I(d,f,N,ee,fe,Ge)}),d.seen.pop(),function(fe,ae,be){return fe.reduce(function(De,et){return et.indexOf(`
`),De+et.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?be[0]+(ae===""?"":ae+`
 `)+" "+fe.join(`,
  `)+" "+be[1]:be[0]+ae+" "+fe.join(", ")+" "+be[1]}(_e,xe,Le)):Le[0]+xe+Le[1]}function H(d){return"["+Error.prototype.toString.call(d)+"]"}function I(d,f,N,se,we,ye){var ee,ge,_e;if((_e=Object.getOwnPropertyDescriptor(f,we)||{value:f[we]}).get?ge=_e.set?d.stylize("[Getter/Setter]","special"):d.stylize("[Getter]","special"):_e.set&&(ge=d.stylize("[Setter]","special")),Xe(se,we)||(ee="["+we+"]"),ge||(d.seen.indexOf(_e.value)<0?(ge=j(N)?v(d,_e.value,null):v(d,_e.value,N-1)).indexOf(`
`)>-1&&(ge=ye?ge.split(`
`).map(function(xe){return"  "+xe}).join(`
`).substr(2):`
`+ge.split(`
`).map(function(xe){return"   "+xe}).join(`
`)):ge=d.stylize("[Circular]","special")),c(ee)){if(ye&&we.match(/^\d+$/))return ge;(ee=JSON.stringify(""+we)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ee=ee.substr(1,ee.length-2),ee=d.stylize(ee,"name")):(ee=ee.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ee=d.stylize(ee,"string"))}return ee+": "+ge}function U(d){return Array.isArray(d)}function J(d){return typeof d=="boolean"}function j(d){return d===null}function $(d){return typeof d=="number"}function s(d){return typeof d=="string"}function c(d){return d===void 0}function m(d){return B(d)&&de(d)==="[object RegExp]"}function B(d){return typeof d=="object"&&d!==null}function Z(d){return B(d)&&de(d)==="[object Date]"}function ne(d){return B(d)&&(de(d)==="[object Error]"||d instanceof Error)}function le(d){return typeof d=="function"}function de(d){return Object.prototype.toString.call(d)}function Ee(d){return d<10?"0"+d.toString(10):d.toString(10)}l.debuglog=function(d){if(c(T)&&(T=L.env.NODE_DEBUG||""),d=d.toUpperCase(),!W[d])if(new RegExp("\\b"+d+"\\b","i").test(T)){var f=L.pid;W[d]=function(){var N=l.format.apply(l,arguments);console.error("%s %d: %s",d,f,N)}}else W[d]=function(){};return W[d]},l.inspect=x,x.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},x.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},l.isArray=U,l.isBoolean=J,l.isNull=j,l.isNullOrUndefined=function(d){return d==null},l.isNumber=$,l.isString=s,l.isSymbol=function(d){return typeof d=="symbol"},l.isUndefined=c,l.isRegExp=m,l.isObject=B,l.isDate=Z,l.isError=ne,l.isFunction=le,l.isPrimitive=function(d){return d===null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||typeof d=="symbol"||d===void 0},l.isBuffer=_(384);var Se=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pe(){var d=new Date,f=[Ee(d.getHours()),Ee(d.getMinutes()),Ee(d.getSeconds())].join(":");return[d.getDate(),Se[d.getMonth()],f].join(" ")}function Xe(d,f){return Object.prototype.hasOwnProperty.call(d,f)}l.log=function(){console.log("%s - %s",pe(),l.format.apply(l,arguments))},l.inherits=_(717),l._extend=function(d,f){if(!f||!B(f))return d;for(var N=Object.keys(f),se=N.length;se--;)d[N[se]]=f[N[se]];return d}}},F={};function S(b){var l=F[b];if(l!==void 0)return l.exports;var _=F[b]={exports:{}};return y[b].call(_.exports,_,_.exports,S),_.exports}S.n=b=>{var l=b&&b.__esModule?()=>b.default:()=>b;return S.d(l,{a:l}),l},S.d=(b,l)=>{for(var _ in l)S.o(l,_)&&!S.o(b,_)&&Object.defineProperty(b,_,{enumerable:!0,get:l[_]})},S.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),S.o=(b,l)=>Object.prototype.hasOwnProperty.call(b,l),S.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var z={};return(()=>{S.r(z),S.d(z,{LSPluginUser:()=>w,setupPluginUserInstance:()=>oe});var b=S(520);S(856);const l=function(t,e){return t===e||t!=t&&e!=e},_=function(t,e){for(var n=t.length;n--;)if(l(t[n][0],e))return n;return-1};var L=Array.prototype.splice;function A(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}A.prototype.clear=function(){this.__data__=[],this.size=0},A.prototype.delete=function(t){var e=this.__data__,n=_(e,t);return!(n<0||(n==e.length-1?e.pop():L.call(e,n,1),--this.size,0))},A.prototype.get=function(t){var e=this.__data__,n=_(e,t);return n<0?void 0:e[n][1]},A.prototype.has=function(t){return _(this.__data__,t)>-1},A.prototype.set=function(t,e){var n=this.__data__,o=_(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this};const T=A,W=typeof En=="object"&&En&&En.Object===Object&&En;var x=typeof self=="object"&&self&&self.Object===Object&&self;const g=W||x||Function("return this")(),k=g.Symbol;var v=Object.prototype,H=v.hasOwnProperty,I=v.toString,U=k?k.toStringTag:void 0,J=Object.prototype.toString,j=k?k.toStringTag:void 0;const $=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":j&&j in Object(t)?function(e){var n=H.call(e,U),o=e[U];try{e[U]=void 0;var u=!0}catch{}var p=I.call(e);return u&&(n?e[U]=o:delete e[U]),p}(t):function(e){return J.call(e)}(t)},s=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},c=function(t){if(!s(t))return!1;var e=$(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},m=g["__core-js_shared__"];var B,Z=(B=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",ne=Function.prototype.toString,le=/^\[object .+?Constructor\]$/,de=Function.prototype,Ee=Object.prototype,Se=de.toString,pe=Ee.hasOwnProperty,Xe=RegExp("^"+Se.call(pe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const d=function(t){return!(!s(t)||(e=t,Z&&Z in e))&&(c(t)?Xe:le).test(function(n){if(n!=null){try{return ne.call(n)}catch{}try{return n+""}catch{}}return""}(t));var e},f=function(t,e){var n=function(o,u){return o?.[u]}(t,e);return d(n)?n:void 0},N=f(g,"Map"),se=f(Object,"create");var we=Object.prototype.hasOwnProperty,ye=Object.prototype.hasOwnProperty;function ee(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}ee.prototype.clear=function(){this.__data__=se?se(null):{},this.size=0},ee.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ee.prototype.get=function(t){var e=this.__data__;if(se){var n=e[t];return n==="__lodash_hash_undefined__"?void 0:n}return we.call(e,t)?e[t]:void 0},ee.prototype.has=function(t){var e=this.__data__;return se?e[t]!==void 0:ye.call(e,t)},ee.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=se&&e===void 0?"__lodash_hash_undefined__":e,this};const ge=ee,_e=function(t,e){var n,o,u=t.__data__;return((o=typeof(n=e))=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null)?u[typeof e=="string"?"string":"hash"]:u.map};function xe(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}xe.prototype.clear=function(){this.size=0,this.__data__={hash:new ge,map:new(N||T),string:new ge}},xe.prototype.delete=function(t){var e=_e(this,t).delete(t);return this.size-=e?1:0,e},xe.prototype.get=function(t){return _e(this,t).get(t)},xe.prototype.has=function(t){return _e(this,t).has(t)},xe.prototype.set=function(t,e){var n=_e(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this};const Ge=xe;function Le(t){var e=this.__data__=new T(t);this.size=e.size}Le.prototype.clear=function(){this.__data__=new T,this.size=0},Le.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Le.prototype.get=function(t){return this.__data__.get(t)},Le.prototype.has=function(t){return this.__data__.has(t)},Le.prototype.set=function(t,e){var n=this.__data__;if(n instanceof T){var o=n.__data__;if(!N||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ge(o)}return n.set(t,e),this.size=n.size,this};const fe=Le,ae=function(){try{var t=f(Object,"defineProperty");return t({},"",{}),t}catch{}}(),be=function(t,e,n){e=="__proto__"&&ae?ae(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},De=function(t,e,n){(n!==void 0&&!l(t[e],n)||n===void 0&&!(e in t))&&be(t,e,n)},et=function(t,e,n){for(var o=-1,u=Object(t),p=n(t),h=p.length;h--;){var P=p[++o];if(e(u[P],P,u)===!1)break}return t};var Qe=a&&!a.nodeType&&a,Ve=Qe&&!0&&i&&!i.nodeType&&i,mt=Ve&&Ve.exports===Qe?g.Buffer:void 0,at=mt?mt.allocUnsafe:void 0;const on=g.Uint8Array,Tn=function(t,e){var n,o,u=e?(n=t.buffer,o=new n.constructor(n.byteLength),new on(o).set(new on(n)),o):t.buffer;return new t.constructor(u,t.byteOffset,t.length)};var sn=Object.create;const On=function(){function t(){}return function(e){if(!s(e))return{};if(sn)return sn(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Q=(E=Object.getPrototypeOf,M=Object,function(t){return E(M(t))});var E,M,te=Object.prototype;const ce=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||te)},Ae=function(t){return t!=null&&typeof t=="object"},tt=function(t){return Ae(t)&&$(t)=="[object Arguments]"};var Je=Object.prototype,an=Je.hasOwnProperty,Tt=Je.propertyIsEnumerable;const yt=tt(function(){return arguments}())?tt:function(t){return Ae(t)&&an.call(t,"callee")&&!Tt.call(t,"callee")},Ot=Array.isArray,ln=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},Ft=function(t){return t!=null&&ln(t.length)&&!c(t)};var cn=a&&!a.nodeType&&a,lt=cn&&!0&&i&&!i.nodeType&&i,un=lt&&lt.exports===cn?g.Buffer:void 0;const dn=(un?un.isBuffer:void 0)||function(){return!1};var Fn=Function.prototype,jt=Object.prototype,bt=Fn.toString,qe=jt.hasOwnProperty,pn=bt.call(Object),re={};re["[object Float32Array]"]=re["[object Float64Array]"]=re["[object Int8Array]"]=re["[object Int16Array]"]=re["[object Int32Array]"]=re["[object Uint8Array]"]=re["[object Uint8ClampedArray]"]=re["[object Uint16Array]"]=re["[object Uint32Array]"]=!0,re["[object Arguments]"]=re["[object Array]"]=re["[object ArrayBuffer]"]=re["[object Boolean]"]=re["[object DataView]"]=re["[object Date]"]=re["[object Error]"]=re["[object Function]"]=re["[object Map]"]=re["[object Number]"]=re["[object Object]"]=re["[object RegExp]"]=re["[object Set]"]=re["[object String]"]=re["[object WeakMap]"]=!1;var vt=a&&!a.nodeType&&a,ct=vt&&!0&&i&&!i.nodeType&&i,Bt=ct&&ct.exports===vt&&W.process,gn=function(){try{return ct&&ct.require&&ct.require("util").types||Bt&&Bt.binding&&Bt.binding("util")}catch{}}(),fn=gn&&gn.isTypedArray;const Pt=fn?function(t){return function(e){return t(e)}}(fn):function(t){return Ae(t)&&ln(t.length)&&!!re[$(t)]},Te=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]};var ut=Object.prototype.hasOwnProperty;const Ze=function(t,e,n){var o=t[e];ut.call(t,e)&&l(o,n)&&(n!==void 0||e in t)||be(t,e,n)};var Mt=/^(?:0|[1-9]\d*)$/;const _t=function(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&(n=="number"||n!="symbol"&&Mt.test(t))&&t>-1&&t%1==0&&t<e};var jn=Object.prototype.hasOwnProperty;const Bn=function(t,e){var n=Ot(t),o=!n&&yt(t),u=!n&&!o&&dn(t),p=!n&&!o&&!u&&Pt(t),h=n||o||u||p,P=h?function(V,G){for(var X=-1,me=Array(V);++X<V;)me[X]=G(X);return me}(t.length,String):[],D=P.length;for(var C in t)!e&&!jn.call(t,C)||h&&(C=="length"||u&&(C=="offset"||C=="parent")||p&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||_t(C,D))||P.push(C);return P};var Pn=Object.prototype.hasOwnProperty;const hn=function(t){if(!s(t))return function(u){var p=[];if(u!=null)for(var h in Object(u))p.push(h);return p}(t);var e=ce(t),n=[];for(var o in t)(o!="constructor"||!e&&Pn.call(t,o))&&n.push(o);return n},xt=function(t){return Ft(t)?Bn(t,!0):hn(t)},ve=function(t){return function(e,n,o,u){var p=!o;o||(o={});for(var h=-1,P=n.length;++h<P;){var D=n[h],C=u?u(o[D],e[D],D,o,e):void 0;C===void 0&&(C=e[D]),p?be(o,D,C):Ze(o,D,C)}return o}(t,xt(t))},mn=function(t,e,n,o,u,p,h){var P,D=Te(t,n),C=Te(e,n),V=h.get(C);if(V)De(t,n,V);else{var G=p?p(D,C,n+"",t,e,h):void 0,X=G===void 0;if(X){var me=Ot(C),He=!me&&dn(C),Ke=!me&&!He&&Pt(C);G=C,me||He||Ke?Ot(D)?G=D:Ae(P=D)&&Ft(P)?G=function(ue,je){var Fe=-1,Yt=ue.length;for(je||(je=Array(Yt));++Fe<Yt;)je[Fe]=ue[Fe];return je}(D):He?(X=!1,G=function(ue,je){if(je)return ue.slice();var Fe=ue.length,Yt=at?at(Fe):new ue.constructor(Fe);return ue.copy(Yt),Yt}(C,!0)):Ke?(X=!1,G=Tn(C,!0)):G=[]:function(ue){if(!Ae(ue)||$(ue)!="[object Object]")return!1;var je=Q(ue);if(je===null)return!0;var Fe=qe.call(je,"constructor")&&je.constructor;return typeof Fe=="function"&&Fe instanceof Fe&&bt.call(Fe)==pn}(C)||yt(C)?(G=D,yt(D)?G=ve(D):s(D)&&!c(D)||(G=function(ue){return typeof ue.constructor!="function"||ce(ue)?{}:On(Q(ue))}(C))):X=!1}X&&(h.set(C,G),u(G,C,o,p,h),h.delete(C)),De(t,n,G)}},ke=function t(e,n,o,u,p){e!==n&&et(n,function(h,P){if(p||(p=new fe),s(h))mn(e,n,P,o,t,u,p);else{var D=u?u(Te(e,P),h,P+"",e,n,p):void 0;D===void 0&&(D=h),De(e,P,D)}},xt)},Dt=function(t){return t},he=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var nt=Math.max;const It=ae?function(t,e){return ae(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Dt;var yn=Date.now;const Nt=function(t){var e=0,n=0;return function(){var o=yn(),u=16-(o-n);if(n=o,u>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(It),bn=(Ue=function(t,e,n){ke(t,e,n)},function(t,e){return Nt(function(n,o,u){return o=nt(o===void 0?n.length-1:o,0),function(){for(var p=arguments,h=-1,P=nt(p.length-o,0),D=Array(P);++h<P;)D[h]=p[o+h];h=-1;for(var C=Array(o+1);++h<o;)C[h]=p[h];return C[o]=u(D),he(n,this,C)}}(t,e,Dt),t+"")}(function(t,e){var n=-1,o=e.length,u=o>1?e[o-1]:void 0,p=o>2?e[2]:void 0;for(u=Ue.length>3&&typeof u=="function"?(o--,u):void 0,p&&function(P,D,C){if(!s(C))return!1;var V=typeof D;return!!(V=="number"?Ft(C)&&_t(D,C.length):V=="string"&&D in C)&&l(C[D],P)}(e[0],e[1],p)&&(u=o<3?void 0:u,o=1),t=Object(t);++n<o;){var h=e[n];h&&Ue(t,h,n)}return t}));var Ue,Ie=function(){return(Ie=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var u in e=arguments[n])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t}).apply(this,arguments)};function zt(t){return t.toLowerCase()}var qt=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],rt=/[^A-Z0-9]+/gi;function dt(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(o,u){return o.replace(u,n)},t)}const pt=navigator.platform.toLowerCase()==="win32"?b.win32:b.posix,gt=function(t,e){return e===void 0&&(e={}),function(n,o){return o===void 0&&(o={}),function(u,p){p===void 0&&(p={});for(var h=p.splitRegexp,P=h===void 0?qt:h,D=p.stripRegexp,C=D===void 0?rt:D,V=p.transform,G=V===void 0?zt:V,X=p.delimiter,me=X===void 0?" ":X,He=dt(dt(u,P,"$1\0$2"),C,"\0"),Ke=0,ue=He.length;He.charAt(Ke)==="\0";)Ke++;for(;He.charAt(ue-1)==="\0";)ue--;return He.slice(Ke,ue).split("\0").map(G).join(me)}(n,Ie({delimiter:"."},o))}(t,Ie({delimiter:"_"},e))},Ut=bn;function Ye(t,e){let n,o,u=!1;const p=P=>D=>{t&&clearTimeout(t),P(D),u=!0},h=new Promise((P,D)=>{n=p(P),o=p(D),t&&(t=setTimeout(()=>o(new Error(`[deferred timeout] ${e}`)),t))});return{created:Date.now(),setTag:P=>e=P,resolve:n,reject:o,promise:h,get settled(){return u}}}const ot=new Map;window.__injectedUIEffects=ot;var it=S(227),Rt=S.n(it);const Re="application/x-postmate-v1+json";let vn=0;const $t={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},kt=(t,e)=>!(typeof e=="string"&&t.origin!==e||!t.data||typeof t.data=="object"&&!("postmate"in t.data)||t.data.type!==Re||!$t[t.data.postmate]);class Ht{parent;frame;child;events={};childOrigin;listener;constructor(e){this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=n=>{if(!kt(n,this.childOrigin))return!1;const{data:o,name:u}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&u in this.events&&this.events[u].forEach(p=>{p.call(this,o)})},this.parent.addEventListener("message",this.listener,!1)}get(e){return new Promise(n=>{const o=++vn,u=p=>{p.data.uid===o&&p.data.postmate==="reply"&&(this.parent.removeEventListener("message",u,!1),n(p.data.value))};this.parent.addEventListener("message",u,!1),this.child.postMessage({postmate:"request",type:Re,property:e,uid:o},this.childOrigin)})}call(e,n){this.child.postMessage({postmate:"call",type:Re,property:e,data:n},this.childOrigin)}on(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class Wt{model;parent;parentOrigin;child;constructor(e){this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",n=>{if(!kt(n,this.parentOrigin))return;const{property:o,uid:u,data:p}=n.data;n.data.postmate!=="call"?((h,P)=>{const D=typeof h[P]=="function"?h[P]():h[P];return Promise.resolve(D)})(this.model,o).then(h=>{n.source.postMessage({property:o,postmate:"reply",type:Re,uid:u,value:h},n.origin)}):o in this.model&&typeof this.model[o]=="function"&&this.model[o](p)})}emit(e,n){this.parent.postMessage({postmate:"emit",type:Re,value:{name:e,data:n}},this.parentOrigin)}}class $e{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(e){this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const n=(p=>{const h=document.createElement("a");h.href=p;const P=h.protocol.length>4?h.protocol:window.location.protocol,D=h.host.length?h.port==="80"||h.port==="443"?h.hostname:h.host:window.location.host;return h.origin||`${P}//${D}`})(e=e||this.url);let o,u=0;return new Promise((p,h)=>{const P=C=>!!kt(C,n)&&(C.data.postmate==="handshake-reply"?(clearInterval(o),this.parent.removeEventListener("message",P,!1),this.childOrigin=C.origin,p(new Ht(this))):h("Failed handshake"));this.parent.addEventListener("message",P,!1);const D=()=>{u++,this.child.postMessage({postmate:"handshake",type:Re,model:this.model},n),u===5&&clearInterval(o)};this.frame.addEventListener("load",()=>{D(),o=setInterval(D,500)}),this.frame.src=e})}}class wt{child;model;parent;parentOrigin;constructor(e){this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,n)=>{const o=u=>{if(u.data.postmate){if(u.data.postmate==="handshake"){this.child.removeEventListener("message",o,!1),u.source.postMessage({postmate:"handshake-reply",type:Re},u.origin),this.parentOrigin=u.origin;const p=u.data.model;return p&&Object.keys(p).forEach(h=>{this.model[h]=p[h]}),e(new Wt(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",o,!1)})}}var Gt=S(729),Qt=S.n(Gt);const{importHTML:Mn,createSandboxContainer:st}=window.QSandbox||{};function Dn(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise(async(n,o)=>{try{const u=await window.apis.doAction(["readFile",t]);n({text:()=>u})}catch(u){console.error(u),o(u)}}))}class _n extends Qt(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(e){super(),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){const{name:e,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;const{template:o,execScripts:u}=await Mn(n,{fetch:Dn});this._mount(o,document.body);const p=st(e,{elementGetter:()=>this._root?.firstChild}).instance.proxy;p.__shadow_mode__=!0,p.LSPluginLocal=this._pluginLocal,p.LSPluginShadow=this,p.LSPluginUser=p.logseq=new w(this._pluginLocal.toJSON(),this._pluginLocal.caller);const h=await u(p,!0);this._unmountFns.push(h.unmount),this._loaded=!0}_mount(e,n){const o=this._frame=document.createElement("div");o.classList.add("lsp-shadow-sandbox"),o.id=this._pluginLocal.id,this._root=o.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,n.appendChild(o),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const Be=Rt()("LSPlugin:caller"),ft="#await#response#",Vt="#lspmsg#error#",Ct=t=>`#lspmsg#${t}`;class St extends Qt(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(e){super(),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const n=this,o=this._pluginLocal!=null;let u=0;const p=new Map,h=Ye(5e3),P=this._extendUserModel({"#lspmsg#ready#":async C=>{P[Ct(C?.pid)]=({type:V,payload:G})=>{Be(`[host (_call) -> *user] ${this._debugTag}`,V,G),n.emit(V,G)},await h.resolve()},"#lspmsg#beforeunload#":async C=>{const V=Ye(1e4);n.emit("beforeunload",Object.assign({actor:V},C)),await V.promise},"#lspmsg#settings#":async({type:C,payload:V})=>{n.emit("settings:changed",V)},"#lspmsg#":async({ns:C,type:V,payload:G})=>{Be(`[host (async) -> *user] ${this._debugTag} ns=${C} type=${V}`,G),C&&C.startsWith("hook")?n.emit(`${C}:${V}`,G):n.emit(V,G)},"#lspmsg#reply#":({_sync:C,result:V})=>{if(Be(`[sync host -> *user] #${C}`,V),p.has(C)){const G=p.get(C);G&&(V?.hasOwnProperty(Vt)?G.reject(V[Vt]):G.resolve(V),p.delete(C))}},...e});if(o)return await h.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const D=new wt(P).sendHandshakeReply();return this._status="pending",await D.then(C=>{this._child=C,this._connected=!0,this._call=async(V,G={},X)=>{if(X){const me=++u;p.set(me,X),G._sync=me,X.setTag(`async call #${me}`),Be(`async call #${me}`)}return C.emit(Ct(P.baseInfo.id),{type:V,payload:G}),X?.promise},this._callUserModel=async(V,G)=>{try{P[V](G)}catch{Be(`[model method] #${V} not existed`)}},setInterval(()=>{if(p.size>100)for(const[V,G]of p)G.settled&&p.delete(V)},18e5)}).finally(()=>{this._status=void 0}),await h.promise,P.baseInfo}async call(e,n={}){return this._call?.call(this,e,n)}async callAsync(e,n={}){const o=Ye(1e4);return this._call?.call(this,e,n,o)}async callUserModel(e,n={}){return this._callUserModel?.call(this,e,n)}async _setupIframeSandbox(){const e=this._pluginLocal,n=e.id,o=`${n}_lsp_main`,u=new URL(e.options.entry);u.searchParams.set("__v__",e.options.version);const p=document.querySelector(`#${o}`);p&&p.parentElement.removeChild(p);const h=document.createElement("div");h.classList.add("lsp-iframe-sandbox-container"),h.id=o,h.dataset.pid=n;try{const C=(await this._pluginLocal._loadLayoutsData())?.$$0;if(C){h.dataset.inited_layout="true";const{width:V,height:G,left:X,top:me}=C;Object.assign(h.style,{width:V+"px",height:G+"px",left:X+"px",top:me+"px"})}}catch(C){console.error("[Restore Layout Error]",C)}document.body.appendChild(h);let P,D=new $e({id:n+"_iframe",container:h,url:u.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}}).sendHandshake();return this._status="pending",new Promise((C,V)=>{P=setTimeout(()=>{V(new Error("handshake Timeout"))},8e3),D.then(G=>{this._parent=G,this._connected=!0,this.emit("connected"),G.on(Ct(e.id),({type:X,payload:me})=>{Be("[user -> *host] ",X,me),this._pluginLocal?.emit(X,me||{})}),this._call=async(...X)=>{await G.call(Ct(e.id),{type:X[0],payload:Object.assign(X[1]||{},{$$pid:e.id})})},this._callUserModel=async(X,me)=>{if(X.startsWith(ft))return await G.get(X.replace(ft,""));G.call(X,me)},C(null)}).catch(G=>{V(G)}).finally(()=>{clearTimeout(P)})}).catch(C=>{throw Be("[iframe sandbox] error",C),C}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const e=this._pluginLocal,n=this._shadow=new _n(e);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(o,u={},p)=>(p&&(u.actor=p),this._pluginLocal?.emit(o,Object.assign(u,{$$pid:e.id})),p?.promise),this._callUserModel=async(...o)=>{let u=o[0];u?.startsWith(ft)&&(u=u.replace(ft,""));const p=o[1]||{},h=this._userModel[u];typeof h=="function"&&await h.call(null,p)}}catch(o){throw Be("[shadow sandbox] error",o),o}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(e){this._debugTag=e}async destroy(){let e=null;this._parent&&(e=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(e=this._getSandboxShadowContainer(),this._shadow.destroy()),e?.parentNode.removeChild(e)}}class Jt{ctx;constructor(e){this.ctx=e}get ctxId(){return this.ctx.baseInfo.id}setItem(e,n){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,n]})}getItem(e){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e]})}removeItem(e){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(e){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e]})}}class In{ctx;constructor(e){this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...n){const o=this.ensureHostScope();return e=gt(e)?.toLowerCase(),o.logseq.api["exper_"+e]?.apply(o,n)}async loadScripts(...e){(e=e.map(n=>n?.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,n)}registerExtensionsEnhancer(e,n){const o=this.ensureHostScope();switch(e){case"katex":o.katex&&n(o.katex).catch(console.error)}return o.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const Pe=t=>`task_callback_${t}`;class xn{_client;_requestId;_requestOptions;_promise;_aborted=!1;constructor(e,n,o={}){this._client=e,this._requestId=n,this._requestOptions=o,this._promise=new Promise((P,D)=>{if(!this._requestId)return D(null);this._client.once(Pe(this._requestId),C=>{C&&C instanceof Error?D(C):P(C)})});const{success:u,fail:p,final:h}=this._requestOptions;this._promise.then(P=>{u?.(P)}).catch(P=>{p?.(P)}).finally(()=>{h?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class Et extends Gt.EventEmitter{_ctx;constructor(e){super(),this._ctx=e,this.ctx.caller.on("#lsp#request#callback",n=>{const o=n?.requestId;o&&this.emit(Pe(o),n?.payload)})}static createRequestTask(e,n,o){return new xn(e,n,o)}async _request(e){const n=this.ctx.baseInfo.id,{success:o,fail:u,final:p,...h}=e,P=this.ctx.Experiments.invokeExperMethod("request",n,h),D=Et.createRequestTask(this.ctx.Request,P,e);return h.abortable?D:D.promise}get ctx(){return this._ctx}}const kn=Symbol.for("proxy-continue"),Nn=Rt()("LSPlugin:user");function Ne(t,e,n){if(typeof n!="function")return!1;const{key:o,label:u,desc:p,palette:h,keybinding:P}=e,D=`SimpleCommandHook${o}${++Zt}`;this.Editor["on"+D](n),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:o,label:u,type:t,desc:p,keybinding:P},["editor/hook",D]],h]})}let Oe=null;const wn={async getInfo(t){return Oe||(Oe=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?Oe[t]:Oe},registerCommand:Ne,registerCommandPalette(t,e){const{key:n,label:o,keybinding:u}=t;return Ne.call(this,"$palette$",{key:n,label:o,palette:!0,keybinding:u},e)},registerCommandShortcut(t,e){const{binding:n}=t,o="$shortcut$",u=o+gt(n);return Ne.call(this,o,{key:u,palette:!1,keybinding:t},e)},registerUIItem(t,e){const n=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[n,t,e]})},registerPageMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id,o=t;Ne.call(this,"page-menu-item",{key:n,label:o},e)},setFullScreen(t){const e=(...n)=>this._callWin("setFullScreen",...n);t==="toggle"?this._callWin("isFullScreen").then(n=>{n?e():e(!0)}):t?e(!0):e()}};let Zt=0;const Cn={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,e){Nn("Register slash command #",this.baseInfo.id,t,e),typeof e=="function"&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map(n=>{const[o,...u]=n;switch(o){case"editor/hook":let p=u[0],h=()=>{this.caller?.callUserModel(p)};typeof p=="function"&&(h=p);const P=`SlashCommandHook${o}${++Zt}`;n[1]=P,this.Editor["on"+P](h)}return n}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id,o=t;Ne.call(this,"block-context-menu-item",{key:n,label:o},e)},scrollToBlockInPage(t,e,n){const o="block-content-"+e;n?.replaceState?this.App.replaceState("page",{name:t},{anchor:o}):this.App.pushState("page",{name:t},{anchor:o})}},Sn={onBlockChanged(t,e){const n=this.baseInfo.id,o=`hook:db:${gt(`block:${t}`)}`,u=({block:p,txData:h,txMeta:P})=>{p.uuid===t&&e(p,h,P)};return this.caller.on(o,u),this.App._installPluginHook(n,o),()=>{this.caller.off(o,u),this.App._uninstallPluginHook(n,o)}}},zn={},r={},O={};class w extends Qt(){_baseInfo;_caller;_version="0.0.8";_debugTag="";_settingsSchema;_connected=!1;_ui=new Map;_mFileStorage;_mRequest;_mExperiments;_beforeunloadCallback;constructor(e,n){super(),this._baseInfo=e,this._caller=n,n.on("sys:ui:visible",o=>{o?.toggle&&this.toggleMainUI()}),n.on("settings:changed",o=>{const u=Object.assign({},this.settings),p=Object.assign(this._baseInfo.settings,o);this.emit("settings:changed",{...p},u)}),n.on("beforeunload",async o=>{const{actor:u,...p}=o,h=this._beforeunloadCallback;try{h&&await h(p),u?.resolve(null)}catch(P){console.debug(`${n.debugTag} [beforeunload] `,P),u?.reject(P)}})}async ready(e,n){if(!this._connected)try{typeof e=="function"&&(n=e,e={});let o=await this._caller.connectToParent(e);this._connected=!0,o=Ut(this._baseInfo,o),this._settingsSchema&&(o.settings=function(u,p){const h=(p||[]).reduce((P,D)=>("default"in D&&(P[D.key]=D.default),P),{});return Object.assign(h,u)}(o.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),o?.id&&(this._debugTag=this._caller.debugTag=`#${o.id} [${o.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(u){console.warn(u)}n&&n.call(this,o)}catch(o){console.error(`${this._debugTag} [Ready Error]`,o)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){typeof e=="function"&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const n="settings:changed";return this.on(n,e),()=>this.off(n,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const n={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(e){const n={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){const e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return Boolean(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),function(n,...o){try{const u=new URL(n);if(!u.origin)throw new Error(null);const p=pt.join(n.substr(u.origin.length),...o);return u.origin+p}catch{return pt.join(n,...o)}}(this._baseInfo.lsr,e)}_makeUserProxy(e,n){const o=this,u=this.caller;return new Proxy(e,{get(p,h,P){const D=p[h];return function(...C){if(D){const G=D.apply(o,C.concat(n));if(G!==kn)return G}if(n){const G=h.toString().match(/^(once|off|on)/i);if(G!=null){const X=G[0].toLowerCase(),me=G.input.slice(X.length),He=X==="off",Ke=o.baseInfo.id,ue=`hook:${n}:${gt(me)}`,je=C[0];u[X](ue,je);const Fe=()=>{u.off(ue,je),u.listenerCount(ue)||o.App._uninstallPluginHook(Ke,ue)};return He?void Fe():(o.App._installPluginHook(Ke,ue),Fe)}}let V=h;return["git","ui","assets"].includes(n)&&(V=n+"_"+V),u.callAsync("api:call",{tag:n,method:V,args:C})}}})}_execCallableAPIAsync(e,...n){return this._caller.callAsync("api:call",{method:e,args:n})}_execCallableAPI(e,...n){this._caller.call("api:call",{method:e,args:n})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(wn,"app")}get Editor(){return this._makeUserProxy(Cn,"editor")}get DB(){return this._makeUserProxy(Sn,"db")}get Git(){return this._makeUserProxy(zn,"git")}get UI(){return this._makeUserProxy(r,"ui")}get Assets(){return this._makeUserProxy(O,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new Jt(this)),e}get Request(){let e=this._mRequest;return e||(e=this._mRequest=new Et(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new In(this)),e}}function oe(t,e){return new w(t,e)}if(window.__LSP__HOST__==null){const t=new St(null);window.logseq=oe({},t)}})(),z})())})(er,er.exports);function We(i,a,y){return Math.min(Math.max(i,y),a)}class Er extends Error{constructor(a){super(`Failed to parse color: "${a}"`)}}var Kt=Er;function At(i){if(typeof i!="string")throw new Kt(i);if(i.trim().toLowerCase()==="transparent")return[0,0,0,0];let a=i.trim();a=Pr.test(i)?Tr(i):i;const y=Or.exec(a);if(y){const b=Array.from(y).slice(1);return[...b.slice(0,3).map(l=>parseInt(en(l,2),16)),parseInt(en(b[3]||"f",2),16)/255]}const F=Fr.exec(a);if(F){const b=Array.from(F).slice(1);return[...b.slice(0,3).map(l=>parseInt(l,16)),parseInt(b[3]||"ff",16)/255]}const S=jr.exec(a);if(S){const b=Array.from(S).slice(1);return[...b.slice(0,3).map(l=>parseInt(l,10)),parseFloat(b[3]||"1")]}const z=Br.exec(a);if(z){const[b,l,_,L]=Array.from(z).slice(1).map(parseFloat);if(We(0,100,l)!==l)throw new Kt(i);if(We(0,100,_)!==_)throw new Kt(i);return[...Mr(b,l,_),L||1]}throw new Kt(i)}function Lr(i){let a=5381,y=i.length;for(;y;)a=a*33^i.charCodeAt(--y);return(a>>>0)%2341}const tr=i=>parseInt(i.replace(/_/g,""),36),Ar="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((i,a)=>{const y=tr(a.substring(0,3)),F=tr(a.substring(3)).toString(16);let S="";for(let z=0;z<6-F.length;z++)S+="0";return i[y]=`${S}${F}`,i},{});function Tr(i){const a=i.toLowerCase().trim(),y=Ar[Lr(a)];if(!y)throw new Kt(i);return`#${y}`}const en=(i,a)=>Array.from(Array(a)).map(()=>i).join(""),Or=new RegExp(`^#${en("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Fr=new RegExp(`^#${en("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),jr=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${en(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Br=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Pr=/^[a-z]+$/i,nr=i=>Math.round(i*255),Mr=(i,a,y)=>{let F=y/100;if(a===0)return[F,F,F].map(nr);const S=(i%360+360)%360/60,z=(1-Math.abs(2*F-1))*(a/100),b=z*(1-Math.abs(S%2-1));let l=0,_=0,L=0;S>=0&&S<1?(l=z,_=b):S>=1&&S<2?(l=b,_=z):S>=2&&S<3?(_=z,L=b):S>=3&&S<4?(_=b,L=z):S>=4&&S<5?(l=b,L=z):S>=5&&S<6&&(l=z,L=b);const A=F-z/2,T=l+A,W=_+A,x=L+A;return[T,W,x].map(nr)};function Dr(i){const[a,y,F,S]=At(i).map((T,W)=>W===3?T:T/255),z=Math.max(a,y,F),b=Math.min(a,y,F),l=(z+b)/2;if(z===b)return[0,0,l,S];const _=z-b,L=l>.5?_/(2-z-b):_/(z+b);return[60*(a===z?(y-F)/_+(y<F?6:0):y===z?(F-a)/_+2:(a-y)/_+4),L,l,S]}function Ir(i,a,y,F){return`hsla(${(i%360).toFixed()}, ${We(0,100,a*100).toFixed()}%, ${We(0,100,y*100).toFixed()}%, ${parseFloat(We(0,1,F).toFixed(3))})`}function Xt(i,a){const[y,F,S,z]=Dr(i);return Ir(y,F,S-a,z)}function Nr(i){if(i==="transparent")return 0;function a(z){const b=z/255;return b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4)}const[y,F,S]=At(i);return .2126*a(y)+.7152*a(F)+.0722*a(S)}function sr(i,a,y,F){return`rgba(${We(0,255,i).toFixed()}, ${We(0,255,a).toFixed()}, ${We(0,255,y).toFixed()}, ${parseFloat(We(0,1,F).toFixed(3))})`}function zr(i,a,y){const F=(j,$)=>$===3?j:j/255,[S,z,b,l]=At(i).map(F),[_,L,A,T]=At(a).map(F),W=T-l,x=y*2-1,k=((x*W===-1?x:x+W/(1+x*W))+1)/2,v=1-k,H=(S*v+_*k)*255,I=(z*v+L*k)*255,U=(b*v+A*k)*255,J=T*y+l*(1-y);return sr(H,I,U,J)}function qn(i,a){return Xt(i,-a)}function Un(i,a){const[y,F,S,z]=At(i);return sr(y,F,S,z-a)}function qr(i){return Nr(i)>.179}function Ur(i){return qr(i)?"#000":"#fff"}function ze(i){const[a,y,F,S]=At(i);let z=b=>{const l=We(0,255,b).toString(16);return l.length===1?`0${l}`:l};return`#${z(a)}${z(y)}${z(F)}${S<1?z(Math.round(S*255)):""}`}var Rr=`main{border-bottom:1px solid var(--solext-ui-border)}.is-mac main{padding-left:84px}main .flex{align-items:flex-end}.light .logseq-tab,.dark .logseq-tab{padding:4px 8px;height:auto;color:var(--ls-primary-text-color)!important;background-color:var(--solext-ui-content-bg)!important;box-shadow:none;border-color:var(--solext-ui-border);border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.light .logseq-tab[data-active=true],.dark .logseq-tab[data-active=true]{color:var(--ls-primary-text-color)!important;background-color:var(--solext-ui-panels-bg)!important;box-shadow:var(--solext-link) 0 -1px 1px 0;transform:translateY(1px)}.light .logseq-tab div,.dark .logseq-tab div{border:0;background-color:transparent}.light .logseq-tab button:hover,.dark .logseq-tab button:hover,.light .logseq-tab[data-active=true] button:hover,.dark .logseq-tab[data-active=true] button:hover{background-color:transparent!important}.logseq-tab-title{transition:none}
`;const $r="solarized-extended",ar="is-solext-runned",Rn="is-tabs-loaded",rr="is-settings-opened",or="is-search-opened",$n="is-search-reordered",lr=`.page-blocks-inner > div > div > div > div > div > div > .ls-block:not([haschild='']):not([data-refs-self='["quote"]']):not([data-refs-self='["card"]']):not(.pre-block) > .flex-row`;let K,q,Ce,Lt,tn,nn,Me,ir=500,Hn,Wn,Gn,ht,ie,R,Qn;const Y={SolExt_default:{fontContentName:"Fira Sans (SolExt default)",fontContentSize:"16px",colorLightContentText:"#334247",colorLightLink:"#009991",colorLightTag:"#008ECE",colorLightUiPanelsBg:"#EDE4D4",colorLightUiBodyBg:"#FEF8EC",colorLightContentBg:"#FEF8EC",colorLightContentAltBg:"#F0E9DB",colorLightMarkBg:"#F9D86C",colorLightMarkText:"#334247",colorLightQuoteBg:"#D7EADD",colorLightQuoteText:"#334247",colorDarkContentText:"#AFB6B6",colorDarkLink:"#B88726",colorDarkTag:"#869629",colorDarkUiPanelsBg:"#002933",colorDarkUiBodyBg:"#00323d",colorDarkContentBg:"#00323d",colorDarkContentAltBg:"#073945",colorDarkMarkBg:"#F9D86C",colorDarkMarkText:"#334247",colorDarkQuoteBg:"#223F3F",colorDarkQuoteText:"#AFB6B6",backgroundURL:"https://images.unsplash.com/photo-1584004400883-35a54de8b74c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",backgroundPadding:"20px 40px 20px 40px",backgroundShadow:!0,bannersAsBackground:!0,bannersIconGlow:!0,contentMaxWidth:"1200px",contentWideMaxWidth:"1600px"},Logseq_original:{fontContentName:"Inter (Logseq default)",fontContentSize:"16px",colorLightContentText:"#433F38",colorLightLink:"#106BA3",colorLightTag:"#106BA3",colorLightUiPanelsBg:"#FFFFFF",colorLightUiBodyBg:"#FFFFFF",colorLightContentBg:"#FFFFFF",colorLightContentAltBg:"#F7F7F7",colorLightMarkBg:"#FEF4AE",colorLightMarkText:"#262626",colorLightQuoteBg:"#FBFAF8",colorLightQuoteText:"#433F38",colorDarkContentText:"#A4B5B6",colorDarkLink:"#8ABBBB",colorDarkTag:"#8ABBBB",colorDarkUiPanelsBg:"#003642",colorDarkUiBodyBg:"#052B36",colorDarkContentBg:"#052B36",colorDarkContentAltBg:"#083643",colorDarkMarkBg:"#FEF4AE",colorDarkMarkText:"#262626",colorDarkQuoteBg:"#083643",colorDarkQuoteText:"#A4B5B6",backgroundURL:"",backgroundPadding:"32px 32px 32px 32px",backgroundShadow:!1,bannersAsBackground:!1,bannersIconGlow:!1,contentMaxWidth:"940px",contentWideMaxWidth:"100%"},Mia_quattro:{fontContentName:"iA Writer Quattro",fontContentSize:"16px",colorLightContentText:"#1A1A1A",colorLightLink:"#0B82B9",colorLightTag:"#747474",colorLightUiPanelsBg:"#EAEAEA",colorLightUiBodyBg:"#F7F7F7",colorLightContentBg:"#F7F7F7",colorLightContentAltBg:"#EAEAEA",colorLightMarkBg:"#FDEB95",colorLightMarkText:"#262626",colorLightQuoteBg:"#EAEAEA",colorLightQuoteText:"#1A1A1A",colorDarkContentText:"#CCCCCC",colorDarkLink:"#18BDEC",colorDarkTag:"#909090",colorDarkUiPanelsBg:"#27272A",colorDarkUiBodyBg:"#18181A",colorDarkContentBg:"#18181A",colorDarkContentAltBg:"#27272A",colorDarkMarkBg:"#FCE386",colorDarkMarkText:"#262626",colorDarkQuoteBg:"#27272A",colorDarkQuoteText:"#CCCCCC",backgroundURL:"",backgroundPadding:"32px 32px 32px 32px",backgroundShadow:!1,bannersAsBackground:!1,bannersIconGlow:!1,contentMaxWidth:"940px",contentWideMaxWidth:"100%"},Chocolate:{fontContentName:"Fira Sans (SolExt default)",fontContentSize:"16px",colorLightContentText:"#2D3D43",colorLightLink:"#368B96",colorLightTag:"#CA7B70",colorLightUiPanelsBg:"#E3D6CE",colorLightUiBodyBg:"#E9DED8",colorLightContentBg:"#E9DED8",colorLightContentAltBg:"#E5D6D0",colorLightMarkBg:"#E5D1CB",colorLightMarkText:"#C26256",colorLightQuoteBg:"#D9C5C0",colorLightQuoteText:"#9A6064",colorDarkContentText:"#B5937D",colorDarkLink:"#56B6C2",colorDarkTag:"#B33D4B",colorDarkUiPanelsBg:"#34282B",colorDarkUiBodyBg:"#2B2124",colorDarkContentBg:"#2B2124",colorDarkContentAltBg:"#34282B",colorDarkMarkBg:"#3D2529",colorDarkMarkText:"#D54455",colorDarkQuoteBg:"#492E2E",colorDarkQuoteText:"#C26356",backgroundURL:"https://4kwallpapers.com/images/wallpapers/lakeside-pink-sky-sunset-minimal-art-gradient-background-7680x3215-4584.png",backgroundPadding:"32px 32px 32px 32px",backgroundShadow:!0,bannersAsBackground:!1,bannersIconGlow:!1,contentMaxWidth:"940px",contentWideMaxWidth:"100%"}},Hr=[{key:"presetHeading",title:"Presets",description:"",type:"heading",default:null},{key:"presetName",title:'Choose preset: built-in (uneditable \u26A0) OR user "Custom" (editable)',description:'(press "Clone" button to copy values to your "Custom" preset)',type:"enum",enumPicker:"select",enumChoices:["SolExt_default","Logseq_original","Mia_quattro","Chocolate","Custom"],default:"SolExt_default"},{key:"presetCustom",title:"Custom theme configuration",description:"",type:"object",default:Y.SolExt_default},{key:"fontsHeading",title:"Fonts",description:"",type:"heading",default:null},{key:"fontContentName",title:"Content font name",description:"",type:"enum",enumPicker:"select",enumChoices:["Fira Sans (SolExt default)","iA Writer Quattro","Inter (Logseq default)","OS System default"],default:Y.SolExt_default.fontContentName},{key:"fontContentSize",title:"Content font size",description:"",type:"string",default:Y.SolExt_default.fontContentSize},{key:"colorLightHeading",title:"Colors: light mode (switch to dark to see it`s settings)",description:"",type:"heading",default:null},{key:"colorLightUiPanelsBg",title:"UI Panels bg (header, sidebars)",description:"",type:"string",default:Y.SolExt_default.colorLightUiPanelsBg},{key:"colorLightUiBodyBg",title:"UI body bg (around content)",description:"",type:"string",default:Y.SolExt_default.colorLightUiBodyBg},{key:"colorLightContentBg",title:"Content bg",description:"",type:"string",default:Y.SolExt_default.colorLightContentBg},{key:"colorLightContentAltBg",title:"Blocks bg (references, props)",description:"",type:"string",default:Y.SolExt_default.colorLightContentAltBg},{key:"colorLightContentText",title:"Text color",description:"",type:"string",default:Y.SolExt_default.colorLightContentText},{key:"colorLightLink",title:"Link color",description:"",type:"string",default:Y.SolExt_default.colorLightLink},{key:"colorLightTag",title:"Tag color",description:"",type:"string",default:Y.SolExt_default.colorLightTag},{key:"colorLightMarkBg",title:"Highlight bg",description:"",type:"string",default:Y.SolExt_default.colorLightMarkBg},{key:"colorLightMarkText",title:"Highlight text",description:"",type:"string",default:Y.SolExt_default.colorLightMarkText},{key:"colorLightQuoteBg",title:"Quote bg",description:"",type:"string",default:Y.SolExt_default.colorLightQuoteBg},{key:"colorLightQuoteText",title:"Quote text",description:"",type:"string",default:Y.SolExt_default.colorLightQuoteText},{key:"colorDarkHeading",title:"Colors: dark mode (switch to light to see it`s settings)",description:"",type:"heading",default:null},{key:"colorDarkUiPanelsBg",title:"UI Panels bg (header, sidebars)",description:"",type:"string",default:Y.SolExt_default.colorDarkUiPanelsBg},{key:"colorDarkUiBodyBg",title:"UI body bg (around content)",description:"",type:"string",default:Y.SolExt_default.colorDarkUiBodyBg},{key:"colorDarkContentBg",title:"Content bg",description:"",type:"string",default:Y.SolExt_default.colorDarkContentBg},{key:"colorDarkContentAltBg",title:"Blocks bg (references, props)",description:"",type:"string",default:Y.SolExt_default.colorDarkContentAltBg},{key:"colorDarkContentText",title:"Text color",description:"",type:"string",default:Y.SolExt_default.colorDarkContentText},{key:"colorDarkLink",title:"Link color",description:"",type:"string",default:Y.SolExt_default.colorDarkLink},{key:"colorDarkTag",title:"Tag color",description:"",type:"string",default:Y.SolExt_default.colorDarkTag},{key:"colorDarkMarkBg",title:"Highlight bg",description:"",type:"string",default:Y.SolExt_default.colorDarkMarkBg},{key:"colorDarkMarkText",title:"Highlight text",description:"",type:"string",default:Y.SolExt_default.colorDarkMarkText},{key:"colorDarkQuoteBg",title:"Quote bg",description:"",type:"string",default:Y.SolExt_default.colorDarkQuoteBg},{key:"colorDarkQuoteText",title:"Quote text",description:"",type:"string",default:Y.SolExt_default.colorDarkQuoteText},{key:"backgroundHeading",title:"Background",description:"",type:"heading",default:null},{key:"backgroundURL",title:"Background URL (set empty to disable feature)",description:"",type:"string",default:Y.SolExt_default.backgroundURL},{key:"backgroundPadding",title:"Content background padding (top right bottom left)",description:"",type:"string",default:Y.SolExt_default.backgroundPadding},{key:"backgroundShadow",title:"",description:"Enable content shadow?",type:"boolean",default:Y.SolExt_default.backgroundShadow},{key:"featuresHeading",title:"Features",description:"",type:"heading",default:null},{key:"faviconsEnabled",title:"",description:"Enable favicons for external links?",type:"boolean",default:!0},{key:"stickyHeadersEnabled",title:"",description:"Enable sticky headers (h1-h5 in document root)?",type:"boolean",default:!0},{key:"headersLabelsEnabled",title:"",description:"Show headers labels?",type:"boolean",default:!0},{key:"newBlockBulletEnabled",title:"",description:"Always show add block bullet on page bottom?",type:"boolean",default:!1},{key:"homeButtonEnabled",title:"",description:"Show Home button?",type:"boolean",default:!1},{key:"bannersPluginHeading",title:"Banners plugin support",description:"",type:"heading",default:null},{key:"bannersAsBackground",title:"",description:"Use banner image as blurred background?",type:"boolean",default:Y.SolExt_default.bannersAsBackground},{key:"bannersIconGlow",title:"",description:"Add glow to banner icon?",type:"boolean",default:Y.SolExt_default.bannersIconGlow},{key:"widthHeading",title:"Sizes",description:"",type:"heading",default:null},{key:"contentMaxWidth",title:"Content max width (px, %, vw)",description:"",type:"string",default:Y.SolExt_default.contentMaxWidth},{key:"contentWideMaxWidth",title:"Content max width in wide mode (in px, %, vw)",description:"",type:"string",default:Y.SolExt_default.contentWideMaxWidth},{key:"leftSidebarWidth",title:"Left sidebar width (in px, %, vw)",description:"",type:"string",default:"250px"},{key:"rightSidebarWidth",title:"Right sidebar width (in px, %, vw)",description:"",type:"string",default:"460px"}],Wr=()=>{cr(),Vr(),Kr()},Gr=()=>{Yr(),Qr(),cr(),Ce.classList.remove(`preset-${Qn.presetName}`),Ce.classList.add(`preset-${R.presetName}`)},Qr=()=>{const i=K.querySelector('.settings-plugin-item[data-id="logseq-solarized-extended-theme"]');!i||(i?.parentNode?.previousSibling?.getElementsByTagName("a")[0].click(),setTimeout(()=>{i.click()},100))},Vr=()=>{if(R.presetName!=="Custom"){const i=K.querySelector('.desc-item[data-key="presetName"] .form-select');if(!i)return;i?.insertAdjacentHTML("afterend",`<button class="button preset-copy-button" title="Clone preset values to your Custom preset and switch to it">
                <i class= "ti ti-clipboard-list"></i>Clone
            </button >`),K.querySelector('.panel-wrap[data-id="logseq-solarized-extended-theme"] .preset-copy-button')?.addEventListener("click",()=>{Wn=!0,logseq.updateSettings({presetCustom:{...Y[i.value]}}),logseq.updateSettings({presetName:"Custom"})})}},cr=()=>{R.presetName==="Custom"?Zr():Jr()},Jr=()=>{const i=K.querySelector('.panel-wrap[data-id="logseq-solarized-extended-theme"]');if(!i)return!1;const a=i.querySelectorAll(".desc-item :is(input, select)");if(a.length)for(let F=0;F<a.length;F++){const S=a[F];S.disabled=!0}const y=i.querySelector('[data-key="presetName"] .form-select');y.disabled=!1},Zr=()=>{const i=K.querySelector('.panel-wrap[data-id="logseq-solarized-extended-theme"]');if(!i)return!1;const a=i.querySelectorAll(".desc-item :is(.form-input, .form-select)");if(a.length)for(let y=0;y<a.length;y++){const F=a[y];F.disabled=!1}},Yr=()=>{switch(R.presetName){case"SolExt_default":logseq.updateSettings(Y.SolExt_default);break;case"Logseq_original":logseq.updateSettings(Y.Logseq_original);break;case"Mia_quattro":logseq.updateSettings(Y.Mia_quattro);break;case"Chocolate":logseq.updateSettings(Y.Chocolate);break;case"Custom":logseq.updateSettings(R.presetCustom);break;default:logseq.updateSettings(Y.SolExt_default)}Hn=!0,console.log(`SolExt: applied preset ${R.presetName}`)},Kr=()=>{const i=K.querySelector('.panel-wrap[data-id="logseq-solarized-extended-theme"]');if(!i||i.getElementsByClassName("color-input-helper")[0])return!1;const y=i.querySelectorAll(`.desc-item.as-input[data-key^="color${ie}"]`);if(y.length)for(let F=0;F<y.length;F++){const S=y[F],z=S.getAttribute("data-key")||"",b=S.getElementsByTagName("input")[0];if(b.classList.add("color-input-helper"),Ln(b),R.presetName!=="Custom")continue;b.addEventListener("keyup",_=>{const L=_.target;Ln(L)}),b.addEventListener("change",_=>{const L=_.target;Ln(L)});const l=parent.Pickr.create({container:S,el:b,theme:"monolith",useAsButton:!0,autoReposition:!1,position:"top-middle",components:{opacity:!1,hue:!0}});l.on("show",()=>{l.setColor(b.value)}),l.on("change",_=>{const L=_.toHEXA().toString();b.value=L,Ln(b),logseq.updateSettings({[z]:L})})}},Ln=i=>{const a=i.value;i.style.backgroundColor=a,i.style.color=Ur(a)},Xr=()=>{R.faviconsEnabled?mr():yr()},eo=()=>{R.stickyHeadersEnabled?_r():xr()};let Jn,ur;const to=()=>{if(!Lt)return;const i=Lt.querySelector(".ls-search");i?(Ce.classList.add(or),oo(i)):Ce.classList.remove(or);const a=Lt.querySelector(".cp__settings-main");a?(Ce.classList.add(rr),io(a)):Ce.classList.remove(rr)},no=()=>{ur={attributes:!0,attributeFilter:["style"]},Jn=new MutationObserver(to)},ro=()=>{!Lt||Jn.observe(Lt,ur)},oo=i=>{i.style.width=K.getElementById("search-button")?.offsetWidth+"px"||"var(--ls-main-content-max-width)"},io=i=>{i.querySelector('.settings-menu-link[data-id="plugins"]')?.addEventListener("click",()=>{setTimeout(()=>{const y=K.querySelector('.ui__modal.is-sub-modal .settings-plugin-item[data-id="logseq-solarized-extended-theme"]');!y||y.addEventListener("click",()=>{setTimeout(()=>{Wr()},500)})},500)})},so=async()=>{if(!Ce.classList.contains($n)){const i=K.querySelector("#head .r");if(i){const a=K.getElementById("search-button");a&&i.insertAdjacentElement("afterbegin",a)}Ce.classList.add($n)}},ao=()=>{const i=K.querySelector("#head .l"),a=K.getElementById("search-button");!i||!a||(i.insertAdjacentElement("beforeend",a),Ce.classList.remove($n))},lo=async()=>{const i=K.querySelector("#right-sidebar .toggle-right-sidebar");dr(!!i)},co=async()=>{const i=K.querySelector("#head .hide-right-sidebar-button"),a=K.querySelector(".cp__right-sidebar-topbar div:last-child div");a&&i&&a.insertAdjacentElement("beforeend",i)},dr=i=>{if(i){const a=K.querySelector("#right-sidebar .toggle-right-sidebar");a?.classList.add("hide-right-sidebar-button");const y=K.querySelector("#head .r");y&&a&&y.insertAdjacentElement("beforeend",a)}else K.querySelector("#head .hide-right-sidebar-button")?.remove()},pr=(i,a,y)=>{const F=i.contentDocument;F&&(F.head.insertAdjacentHTML("beforeend",`<style id='${y}'>
                ${a}
            </style>`),K.documentElement.classList.contains("is-mac")&&F.body.classList.add("is-mac"),console.log(`SolExt: plugins css inject - ${i.id} - ${y}`))},An=(i,a)=>{const y=i.contentDocument;y&&y.getElementById(a)?.remove()};let Zn,gr;const uo=function(i){console.log("SolExt: plugins mutation");for(let a=0;a<i.length;a++){const y=i[a].addedNodes[0];y&&y.id=="logseq-tabs_lsp_main"&&setTimeout(()=>{Ce.classList.add(Rn),Me=K.getElementById("logseq-tabs_iframe"),fr(Me),Yn(Me)},1e3);const F=i[a].removedNodes[0];F&&F.id=="logseq-tabs_lsp_main"&&(Ce.classList.remove(Rn),Me=null)}},po=()=>{gr={childList:!0},Zn=new MutationObserver(uo)},go=()=>{Zn.observe(K.body,gr)},fr=i=>{setTimeout(()=>{An(i,"tabs-styles"),pr(i,Rr,"tabs-styles")},400)},Yn=i=>{setTimeout(()=>{An(i,"tabs-vars"),pr(i,Do(),"tabs-vars")},800)},fo=i=>{An(i,"tabs-styles"),An(i,"tabs-vars")},ho=async()=>{Me&&(Ce.classList.add(Rn),fr(Me),Yn(Me)),go()},mo=()=>{Me&&fo(Me),Zn.disconnect()},hr=i=>{for(let a=0;a<i.length;a++){const y=i[a].querySelector(".external-link-img");y&&y.remove();const{hostname:F,protocol:S}=new URL(i[a].href);if(S==="http:"||S==="https:"){const z=`https://www.google.com/s2/favicons?domain=${F}&sz=16`,b=K.createElement("img");b.src=z,b.width=16,b.height=16,b.classList.add("external-link-img"),i[a].insertAdjacentElement("afterbegin",b)}}},yo=()=>{const i=K.querySelectorAll(".external-link-img");if(i.length)for(let a=0;a<i.length;a++)i[a].remove()},mr=()=>{!R.faviconsEnabled||setTimeout(()=>{const i=K.querySelectorAll(".external-link");hr(i),_o()},500)},yr=()=>{rn.disconnect(),yo()};let rn,Kn;const bo=function(i){if(!!tn)for(let a=0;a<i.length;a++){const y=i[a].addedNodes[0];if(y&&y.childNodes.length){const F=y.querySelectorAll(".external-link");F.length&&(rn.disconnect(),hr(F),rn.observe(tn,Kn))}}},vo=()=>{Kn={childList:!0,subtree:!0},rn=new MutationObserver(bo)},_o=()=>{!tn||rn.observe(tn,Kn)};let Xn,br;const xo=function(i){for(let a=0;a<i.length;a++){const y=i[a].addedNodes[0];if(y&&y.childNodes.length){const F=y.querySelectorAll(lr);F.length&&vr(F)}}},vr=i=>{for(let a=0;a<i.length;a++){const y=i[a];y&&y.querySelector(":is(h1, h2, h3, h4, h5)")&&(y.classList.add("will-stick"),Co(y))}},ko=()=>{br={childList:!0,subtree:!0},Xn=new MutationObserver(xo)},wo=()=>{!nn||Xn.observe(nn,br)},Co=i=>{const a=S=>{for(let z=0;z<S.length;z++)S[z].target.classList.toggle("is-sticky",S[z].intersectionRatio<1)},y={root:nn,rootMargin:"0px 0px 0px 0px",threshold:[1]};new IntersectionObserver(a,y).observe(i)},_r=()=>{!R.stickyHeadersEnabled||setTimeout(()=>{const i=K.querySelectorAll(lr);vr(i),wo()},500)},xr=()=>{Xn.disconnect();const i=K.querySelectorAll(".will-stick");if(i.length)for(let a=0;a<i.length;a++)i[a].classList.remove("will-stick")},kr=()=>{ht=!0,Ce.classList.add(ar),logseq.settings?.presetName||(console.log("SolExt: no settings ini file! Run later"),ir=2e3),setTimeout(()=>{Ce.classList.add(`preset-${logseq.settings?.presetName}`),Me=K.getElementById("logseq-tabs_iframe"),Cr(),so(),lo(),ho(),mr(),_r(),ro()},ir)},wr=()=>{ht=!1,Ce.classList.remove(ar),Ce.classList.remove(`preset-${R.presetName}`),Mo(),ao(),co(),mo(),yr(),xr(),Jn.disconnect()},So=i=>{!ht||dr(i)},Eo=(i,a)=>{if(!ht)return;if(Qn={...a},R={...i},Hn){console.log("SolExt: settings changed programmatically (preset applied), skipping"),Hn=!1,Vn();return}if(Gn){console.log("SolExt: settings changed programmatically (preset settings duplicated), skipping"),Gn=!1;return}if(Wn){console.log("SolExt: settings changed programmatically (preset settings copied), skipping"),Wn=!1;return}console.log("SolExt: settings changed");const y=Ao(Qn,R);console.log("SolExt: settings changed:",y),y.includes("presetName")?Gr():(Vn(),Lo()),y.includes("faviconsEnabled")&&Xr(),y.includes("stickyHeadersEnabled")&&eo()},Lo=()=>{if(R.presetName==="Custom"){const{presetName:i,presetCustom:a,...y}=R;logseq.updateSettings({presetCustom:y}),Gn=!0,console.log("SolExt: settings duplicated")}},Vn=()=>{Cr(),Me&&Yn(Me)},Ao=(i,a)=>Object.keys(i).filter(F=>F==="presetCustom"?!1:i[F]!==a[F]),To=i=>{if(console.log("SolExt: theme changed to",i),ie=i.mode.charAt(0).toUpperCase()+i.mode.slice(1),i.pid==="logseq-solarized-extended-theme"){if(console.log("SolExt: switching to SolExt theme detected!"),ht){console.log("SolExt: ...but skipping init, already runned!");return}kr()}else wr()},Oo=i=>{!ht||(console.log("SolExt: theme mode changed to",i),ie=i.charAt(0).toUpperCase()+i.slice(1),Vn())},Fo=()=>{!ht||wr()},jo=async()=>{const i="lsp://logseq.io/logseq-solarized-extended-theme/dist/assets/solExtTheme.css",a={name:"Solarized Extended Light Theme",url:i,description:"Light solarized Logseq theme with extra stuff",mode:"light",pid:$r},y={name:"Solarized Extended Dark Theme",url:i,description:"Dark solarized Logseq theme with extra stuff",mode:"dark",pid:"pluginID"};logseq.provideTheme(a),logseq.provideTheme(y)},Bo=()=>K.querySelector('link[href="lsp://logseq.io/logseq-solarized-extended-theme/dist/assets/solExtTheme.css"]')?(console.log("SolExt: theme is chosen!"),!0):!1,Po=async()=>{const i=K.createElement("link");i.rel="stylesheet",i.href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/monolith.min.css",K.getElementsByTagName("head")[0].appendChild(i);const a=K.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/pickr.min.js",K.getElementsByTagName("head")[0].appendChild(a)},Cr=()=>{switch(R.fontContentName){case"Fira Sans (SolExt default)":q.style.setProperty("--solext-content-font","var(--solext-font-fira-sans)");break;case"iA Writer Quattro":q.style.setProperty("--solext-content-font","var(--solext-font-aiwriter-quattro)");break;case"Inter (Logseq default)":q.style.setProperty("--solext-content-font","var(--solext-font-default-inter)");break;case"OS System default":q.style.setProperty("--solext-content-font","var(--solext-font-os-system)");break;default:q.style.setProperty("--solext-content-font","var(--solext-font-fira-sans)")}R.fontContentSize&&q.style.setProperty("--solext-content-font-size",R.fontContentSize),q.style.setProperty("--solext-ui-panels-bg-user",R[`color${ie}UiPanelsBg`]),q.style.setProperty("--solext-ui-border-user",ze(Xt(R[`color${ie}UiPanelsBg`],.08))),q.style.setProperty("--solext-ui-content-bg-user",ze(Xt(R[`color${ie}UiPanelsBg`],.04))),q.style.setProperty("--solext-ui-body-bg-user",R[`color${ie}UiBodyBg`]),q.style.setProperty("--solext-content-border",ze(Xt(R[`color${ie}ContentAltBg`],.04))),q.style.setProperty("--solext-content-alt-bg-0-user",ze(Xt(R[`color${ie}ContentAltBg`],.02))),q.style.setProperty("--solext-content-alt-bg-user",R[`color${ie}ContentAltBg`]),q.style.setProperty("--solext-content-alt-bg-2-user",ze(qn(R[`color${ie}ContentAltBg`],.02))),q.style.setProperty("--solext-content-alt-bg-3-user",ze(qn(R[`color${ie}ContentAltBg`],.04))),q.style.setProperty("--solext-content-bg-user",R[`color${ie}ContentBg`]),q.style.setProperty("--solext-content-text-user",R[`color${ie}ContentText`]),q.style.setProperty("--solext-content-text-alt-user",ze(qn(R[`color${ie}ContentText`],.2))),q.style.setProperty("--solext-content-text-op-user",ze(Un(R[`color${ie}ContentText`],.8))),q.style.setProperty("--solext-link-user",R[`color${ie}Link`]),q.style.setProperty("--solext-link-lighter-user",ze(Un(R[`color${ie}Link`],.85))),q.style.setProperty("--solext-tag-user",R[`color${ie}Tag`]),q.style.setProperty("--solext-tag-lighter-user",ze(Un(R[`color${ie}Tag`],.85))),q.style.setProperty("--solext-mark-bg-user",R[`color${ie}MarkBg`]),q.style.setProperty("--solext-mark-text-user",R[`color${ie}MarkText`]),q.style.setProperty("--solext-quote-bg-user",R[`color${ie}QuoteBg`]),q.style.setProperty("--solext-quote-text-user",R[`color${ie}QuoteText`]),q.style.setProperty("--solext-selected-user",ze(zr(R[`color${ie}ContentBg`],R[`color${ie}Link`],.2))),R.headersLabelsEnabled?q.style.removeProperty("--headers-labels"):q.style.setProperty("--headers-labels","none"),R.newBlockBulletEnabled?q.style.setProperty("--new-bullet-hidden","none"):q.style.removeProperty("--new-bullet-hidden"),R.homeButtonEnabled?q.style.setProperty("--hidden-home","none"):q.style.removeProperty("--hidden-home"),q.style.setProperty("--ls-main-content-max-width",R.contentMaxWidth),q.style.setProperty("--ls-main-content-max-width-wide",R.contentWideMaxWidth),q.style.setProperty("--ls-left-sidebar-width",R.leftSidebarWidth),q.style.setProperty("--ls-right-sidebar-width",R.rightSidebarWidth),R.backgroundURL?q.style.setProperty("--bg-url",`url(${R.backgroundURL})`):q.style.setProperty("--bg-url","none"),R.backgroundPadding?q.style.setProperty("--solext-content-padding",R.backgroundPadding):q.style.setProperty("--bg-url","none"),R.backgroundShadow?q.style.removeProperty("--bg-shadow"):q.style.setProperty("--bg-shadow","none"),R.bannersAsBackground?q.style.removeProperty("--banner-asBg"):q.style.setProperty("--banner-asBg","none"),R.bannersIconGlow?q.style.removeProperty("--banner-iconGlow"):q.style.setProperty("--banner-iconGlow","none"),q.style.setProperty("--solext-sticky-top",getComputedStyle(nn).getPropertyValue("padding-top").trim()),console.log("SolExt: global CSS vars updated")},Mo=()=>{q.style.removeProperty("--ls-main-content-max-width"),q.style.removeProperty("--ls-main-content-max-width-wide"),q.style.removeProperty("--ls-left-sidebar-width"),q.style.removeProperty("--ls-right-sidebar-width"),q.style.removeProperty("--new-bullet-hidden"),q.style.removeProperty("--headers-labels"),q.style.removeProperty("--banner-asBg"),q.style.removeProperty("--banner-iconGlow"),q.style.removeProperty("--bg-url")},Do=()=>`
        :root {
            --ls-title-text-color: ${getComputedStyle(top.document.documentElement).getPropertyValue("--ls-title-text-color").trim()};
            --ls-primary-text-color: ${getComputedStyle(top.document.documentElement).getPropertyValue("--ls-primary-text-color").trim()};
            --solext-ui-panels-bg: ${getComputedStyle(top.document.documentElement).getPropertyValue("--solext-ui-panels-bg").trim()};
            --solext-ui-content-bg: ${getComputedStyle(top.document.documentElement).getPropertyValue("--solext-ui-content-bg").trim()};
            --solext-ui-border: ${getComputedStyle(top.document.documentElement).getPropertyValue("--solext-ui-border").trim()};
            --solext-link: ${getComputedStyle(top.document.documentElement).getPropertyValue("--solext-link").trim()};
        }
    `,Io=async()=>{K=parent.document,q=K.documentElement,Ce=K.body,Lt=K.querySelector(".ui__modal"),tn=K.getElementById("app-container"),nn=K.getElementById("main-content-container")},No=async()=>{console.log("SolExt: plugin loaded"),logseq.provideStyle(`
        body:not(.is-solext-runned) .ui__modal.is-sub-modal .settings-plugin-item[data-id="logseq-solarized-extended-theme"] {
            display: none;
        }
    `),jo(),logseq.useSettingsSchema(Hr),Io(),ie=q.getAttribute("data-theme")||"light",ie=ie.charAt(0).toUpperCase()+ie.slice(1),R=logseq.settings,no(),po(),vo(),ko(),Bo()&&kr(),setTimeout(()=>{logseq.App.onThemeChanged(i=>{To(i)}),logseq.App.onThemeModeChanged(({mode:i})=>{Oo(i)}),logseq.App.onSidebarVisibleChanged(({visible:i})=>{So(i)}),logseq.onSettingsChanged((i,a)=>{Eo(i,a)}),logseq.beforeunload(async()=>{Fo()}),Po()},2e3)};logseq.ready(No).catch(console.error);
//# sourceMappingURL=index.6bad8226.js.map
